   \begin{marginfigure}[0cm]
 

% Author: Izaak Neutelings (Februari 2019)
% Inspiration: https://tex.stackexchange.com/questions/285578/how-to-draw-parallelepiped-and-cube-with-latex/288101#288101
 \usetikzlibrary{quotes,arrows,arrows.meta}
\tikzset{>=latex} % for LaTeX arrow head

\colorlet{myblue}{blue!20}
\colorlet{mydarkblue}{blue!50!black}
\colorlet{myred}{black!50!red}

% CUBE
\tikzset{
  cube/.pic={
    \tikzset{every edge quotes/.append style={midway,auto},/cube/.cd,#1}
    \def\csize{2*\cubesize}
    \draw [every edge/.append style={pic actions,densely dashed,opacity=.5},pic actions]
    (0,0,0) coordinate (o)
            edge coordinate [pos=1] (g) ++(0,0,-\csize)
        --++(0,\csize,0) coordinate (a)
        --++(\csize,0,0) coordinate (b)
        --++(0,-\csize,0) coordinate (c) -- cycle
    (a) --++(0,0,-\csize) coordinate (d) edge (g)
        --++(\csize,0,0) coordinate (e) -- (b) -- cycle
    (c) -- (b) -- (e)
        --++(0,-\csize,0) coordinate (f) edge (g) -- cycle;
    \path [every edge/.append style={pic actions, |-|}];
  },
  z={(-0.334,-0.334)},
  /cube/.search also={/tikz},
  /cube/.cd,
  size/.store in=\cubesize, size=1,
}

% GAS MOLECULE with vector
\tikzset{
  gasparticle/.pic={
    \tikzset{/gasparticle/.cd,#1}
    \draw[->,green!60!black] (0,0) -- (\vec);
    \node[circle,fill,inner sep=.8,fill=black!80!blue] at (0,0,0) {};
  }
  /gasparticle/.search also={/tikz},
  /gasparticle/.cd,
  vec/.store in=\vec, vec={90:0.5},
}



 
% GAS in a box
 \begin{tikzpicture}




\begin{scope}[shift={(-15em,0em)}]
  \pic at (0,0,0) {cube={size=1}};
  \pic at (0.6,1.0,-1.0) {gasparticle={vec={-40:0.5}}};
  \pic at (0.2,1.0,-0.6) {gasparticle={vec={-110:0.6}}};
  \pic at (0.2,1.7,-0.6) {gasparticle={vec={-10:0.7}}};
  \pic at (0.5,0.3,-0.3) {gasparticle={vec={45:0.5}}};
  \pic at (0.9,0.1,-0.2) {gasparticle={vec={-10:0.5}}};
  \pic at (1.6,0.4,-0.3) {gasparticle={vec={-170:0.4}}};
  \pic at (1.5,1.9,-1.5) {gasparticle={vec={160:0.3}}};
  \pic at (0.2,1.8,-1.8) {gasparticle={vec={-10:0.6}}};
  \pic at (1.4,0.6,-0.9) {gasparticle={vec={120:0.3}}};
  \pic at (0.8,1.6,-1.5) {gasparticle={vec={30:0.5}}};
  \pic at (1.8,1.1,-1.0) {gasparticle={vec={75:0.6}}};
  \pic at (1.8,0.2,-1.9) {gasparticle={vec={150:0.4}}};
  \pic at (1.9,0.2,-0.7) {gasparticle={vec={30:0.3}}};
  \pic at (1.2,1.2,-1.1) {gasparticle={vec={30:0.5}}};

\end{scope}
\end{tikzpicture} 

\begin{tikzpicture} 
\begin{scope}[shift={(3em,-6em)}]
\node[text width=5cm] at ([yshift=0.2cm]a.north) {\mytriangleup{red}Microscopic picture of a gas};
\end{scope}  
\end{tikzpicture} 



\end{marginfigure}
