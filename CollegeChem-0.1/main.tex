\documentclass[a4paper,14pt,twoside,justified, symmetric]{tufte-book} % Use the tufte-book class which in turn uses the tufte-common class
%%%%%%%%%%%%%%%%%%PAGE SIZE%%%%%%
\geometry{textwidth=.58\paperwidth} % size of text column
\geometry{
  left=21.8mm, % left margin
  textwidth=125mm, % main text block
  marginparsep=8.2mm, % gutter between main text block and margin notes
  marginparwidth=49.4mm % width of margin notes
}
%%%%%%%%%%%%%%%%%%PAGE SIZE%%%%%%
\usepackage{graphicx}
\usepackage{mathpazo}
\usepackage{lscape}
\usepackage{asymptote}
\usepackage{dingbat}
\usepackage{wrapfig}
\usepackage{dirtytalk}
\usepackage{savesym}

\usepackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%
%\usepackage{fourier}
%\usepackage{marvosym}\usepackage{pifont}
%\usepackage{url}
\usepackage{tabu}
\usepackage{modiagram}
\usepackage{amsmath}
\usepackage{setspace}
\usepackage{afterpage}
\usepackage[version=4]{mhchem}
\usepackage{fontawesome}
\usepackage{xcolor, soul}
\sethlcolor{green}
\usepackage{amsmath}
\usepackage{fonttable}
\usepackage{paracol}
\usepackage{chemfig}
\usetikzlibrary{3d}
\usepackage[ugly]{nicefrac}
\usepackage{cutwin}
%\usepackage{pstricks}

\usepackage{pgfplots}\pgfplotsset{compat=newest}

\usepackage{movie15}
\usepackage{hyperref}


\graphicspath{ {images/} }
\hypersetup{colorlinks} % Comment this line if you don't wish to have colored links
\usepackage{microtype} % Improves character and word spacing
\usepackage{lipsum} % Inserts dummy text
\usepackage{booktabs} % Better horizontal rules in tables
%%%%%%COLORS
\definecolor{olive}{rgb}{0.3, 0.4, .1}
\definecolor{fore}{RGB}{249,242,215}
\definecolor{back}{RGB}{51,51,51}
\definecolor{title}{RGB}{255,0,90}
\definecolor{dgreen}{rgb}{0.,0.6,0.}
\definecolor{gold}{rgb}{1.,0.84,0.}
\definecolor{JungleGreen}{cmyk}{0.99,0,0.52,0}
\definecolor{BlueGreen}{cmyk}{0.85,0,0.33,0}
\definecolor{RawSienna}{cmyk}{0,0.72,1,0.45}
\definecolor{Magenta}{cmyk}{0,1,0,0}
%%%%%%COLORS
\usepackage{graphicx} % Needed to insert images into the document
\graphicspath{{graphics/}} % Sets the default location of pictures
\setkeys{Gin}{width=\linewidth,totalheight=\textheight,keepaspectratio} % Improves figure scaling
\usepackage{fancyvrb} % Allows customization of verbatim environments
\fvset{fontsize=\normalsize} % The font size of all verbatim text can be changed here
\newcommand{\hangp}[1]{\makebox[0pt][r]{(}#1\makebox[0pt][l]{)}} % New command to create parentheses around text in tables which take up no horizontal space - this improves column spacing
\newcommand{\hangstar}{\makebox[0pt][l]{*}} % New command to create asterisks in tables which take up no horizontal space - this improves column spacing
\usepackage{xspace} % Used for printing a trailing space better than using a tilde (~) using the \xspace command
\newcommand{\monthyear}{\ifcase\month\or January\or February\or March\or April\or May\or June\or July\or August\or September\or October\or November\or December\fi\space\number\year} % A command to print the current month and year
\newcommand{\openepigraph}[2]{ % This block sets up a command for printing an epigraph with 2 arguments - the quote and the author
\begin{fullwidth}
\sffamily\large
\begin{doublespace}
\noindent\allcaps{#1}\\ % The quote
\noindent\allcaps{#2} % The author
\end{doublespace}
\end{fullwidth}
}
\newcommand{\blankpage}{\newpage\hbox{}\thispagestyle{empty}\newpage} % Command to insert a blank page
\usepackage{units} % Used for printing standard units
\newcommand{\hlred}[1]{\textcolor{Maroon}{#1}} % Print text in maroon
%\newcommand{\hangleft}[1]{\makebox[0pt][r]{#1}} % Used for printing commands in the index, moves the slash left so the command name aligns with the rest of the text in the index 
\newcommand{\hairsp}{\hspace{1pt}} % Command to print a very short space
\newcommand{\ie}{\textit{i.\hairsp{}e.}\xspace} % Command to print i.e.
\newcommand{\eg}{\textit{e.\hairsp{}g.}\xspace} % Command to print e.g.
\newcommand{\na}{\quad--} % Used in tables for N/A cells
\newcommand{\measure}[3]{#1/#2$\times$\unit[#3]{pc}} % Typesets the font size, leading, and measure in the form of: 10/12x26 pc.
\newcommand{\tuftebs}{\symbol{'134}} % Command to print a backslash in tt type in OT1/T1
\providecommand{\XeLaTeX}{X\lower.5ex\hbox{\kern-0.15em\reflectbox{E}}\kern-0.1em\LaTeX}
\newcommand{\tXeLaTeX}{\XeLaTeX\index{XeLaTeX@\protect\XeLaTeX}} % Command to print the XeLaTeX logo while simultaneously adding the position to the index
\newcommand{\doccmdnoindex}[2][]{\texttt{\tuftebs#2}} % Command to print a command in texttt with a backslash of tt type without inserting the command into the index
\newcommand{\doccmddef}[2][]{\hlred{\texttt{\tuftebs#2}}\label{cmd:#2}\ifthenelse{\isempty{#1}} % Command to define a command in red and add it to the index
{ % If no package is specified, add the command to the index
\index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2}}% Command name
}
{ % If a package is also specified as a second argument, add the command and package to the index
\index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2} (\texttt{#1} package)}% Command name
\index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}% Package name
}}
\newcommand{\doccmd}[2][]{% Command to define a command and add it to the index
\texttt{\tuftebs#2}%
\ifthenelse{\isempty{#1}}% If no package is specified, add the command to the index
{%
\index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2}}% Command name
}
{%
\index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2} (\texttt{#1} package)}% Command name
\index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}% Package name
}}
% A bunch of new commands to print commands, arguments, environments, classes, etc within the text using the correct formatting
\newcommand{\docopt}[1]{\ensuremath{\langle}\textrm{\textit{#1}}\ensuremath{\rangle}}
\newcommand{\docarg}[1]{\textrm{\textit{#1}}}
\newenvironment{docspec}{\begin{quotation}\ttfamily\parskip0pt\parindent0pt\ignorespaces}{\end{quotation}}
\newcommand{\docenv}[1]{\texttt{#1}\index{#1 environment@\texttt{#1} environment}\index{environments!#1@\texttt{#1}}}
\newcommand{\docenvdef}[1]{\hlred{\texttt{#1}}\label{env:#1}\index{#1 environment@\texttt{#1} environment}\index{environments!#1@\texttt{#1}}}
\newcommand{\docpkg}[1]{\texttt{#1}\index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}}
\newcommand{\doccls}[1]{\texttt{#1}}
\newcommand{\docclsopt}[1]{\texttt{#1}\index{#1 class option@\texttt{#1} class option}\index{class options!#1@\texttt{#1}}}
\newcommand{\docclsoptdef}[1]{\hlred{\texttt{#1}}\label{clsopt:#1}\index{#1 class option@\texttt{#1} class option}\index{class options!#1@\texttt{#1}}}
\newcommand{\docmsg}[2]{\bigskip\begin{fullwidth}\noindent\ttfamily#1\end{fullwidth}\medskip\par\noindent#2}
\newcommand{\docfilehook}[2]{\texttt{#1}\index{file hooks!#2}\index{#1@\texttt{#1}}}
\newcommand{\doccounter}[1]{\texttt{#1}\index{#1 counter@\texttt{#1} counter}}
\usepackage{makeidx} % Used to generate the index
\makeindex % Generate the index which is printed at the end of the document
% This block contains a number of shortcuts used throughout the book
\newcommand{\vdqi}{\textit{VDQI}\xspace}
\newcommand{\ei}{\textit{EI}\xspace}
\newcommand{\ve}{\textit{VE}\xspace}
\newcommand{\be}{\textit{BE}\xspace}
\newcommand{\VDQI}{\textit{The Visual Display of Quantitative Information}\xspace}
\newcommand{\EI}{\textit{Envisioning Information}\xspace}
\newcommand{\VE}{\textit{Visual Explanations}\xspace}
\newcommand{\BE}{\textit{Beautiful Evidence}\xspace}
\newcommand{\TL}{Tufte-\LaTeX\xspace}


%----------------------------------------------------------------------------------------
%	BOOK META-INFORMATION
%----------------------------------------------------------------------------------------
\title{College Chemistry} % Title of the book
\author[Daniel Torres, \today]{Daniel Torres} % Author
\publisher{BMCC-CUNY} % Publisher
%----------------------------------------------------------------------------------------


%%%%%%%%%%%%%%%%%%%%%%%%Chapter Numbers
\usepackage{xcolor}
\def\chpcolor{blue!30!black}
\def\chpcolortxt{black!90}
\def\sectionfont{\sffamily\LARGE}
\setcounter{secnumdepth}{2}
\makeatletter
%Section:
\def\@sectionstrut{\vrule\@width\z@\@height12.5\p@}
\def\@makesectionhead#1{%
  {\par\vspace{20pt}%
   \parindent 0pt\raggedleft\sectionfont
   \colorbox{\chpcolor}{%
     \parbox[t]{90pt}{\color{white}\@sectionstrut\@depth4.5\p@\hfill
       \ifnum\c@secnumdepth>\z@\thesection\fi}%
   }%
   \begin{minipage}[t]{\dimexpr\textwidth-90pt-2\fboxsep\relax}
   \color{\chpcolortxt}\@sectionstrut\hspace{5pt}#1
   \end{minipage}\par
   \vspace{10pt}%
  }
}
\def\section{\@afterindentfalse\secdef\@section\@ssection}
\def\@section[#1]#2{%
  \ifnum\c@secnumdepth>\m@ne
    \refstepcounter{section}%
    \addcontentsline{toc}{section}{\protect\numberline{\thesection}#1}%
  \else
    \phantomsection
    \addcontentsline{toc}{section}{#1}%
  \fi
  \sectionmark{#1}%
  \if@twocolumn
    \@topnewpage[\@makesectionhead{#2}]%
  \else
    \@makesectionhead{#2}\@afterheading
  \fi
}
\def\@ssection#1{%
  \if@twocolumn
    \@topnewpage[\@makesectionhead{#1}]%
  \else
    \@makesectionhead{#1}\@afterheading
  \fi
}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%Chapter Numbers

%%%%%%BOXES SAMPLE PROBLEM     
\usepackage[many]{tcolorbox}
\definecolor{myblue}{RGB}{0,163,243}
\tcbset{mystyle/.style={
  breakable,
  enhanced,
  outer arc=0pt,
  arc=0pt,
  colframe=black!45,
  colback=black!45,
  attach boxed title to top left,
  boxed title style={
    colback=black!40,
    outer arc=0pt,
    arc=0pt,
    },
  title=Example~\thetcbcounter,
  fonttitle=\sffamily
  }
}
\tcbset{mystyle2/.style={
  breakable,
  enhanced,
  outer arc=0pt,
  arc=0pt,
  colframe=black!45,
  colback=white,
  attach boxed title to top left,
  boxed title style={
    colback=white,
    outer arc=0pt,
    arc=0pt,
    },
  fonttitle=\sffamily
  }
}
\newtcolorbox[auto counter]{example}[1][]{
  mystyle,
  colback=white,
  rightrule=0pt,
  toprule=0pt,
  title=Sample Problem \thetcbcounter,
  }
  \newtcolorbox{work}[1][]{
  mystyle2,
  colback=white,
  rightrule=0pt,
  toprule=0pt,  
  bottomrule=0pt,
  rightrule=0pt,
  }
  \newtcolorbox[auto counter]{problem}[1][]{
  mystyle,
  colback=white,
  rightrule=0pt,
  toprule=0pt,
  title=Chapter Problems,
  }
%%%%%%BOXES SAMPLE PROBLEM
\newcommand\textlcsc[1]{\textsc{\MakeLowercase{#1}}}   %FORCE CAPS
%%%%%%COLOED CIRCLES
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{%
            \node[shape=circle,fill=blue!30!black,,draw,inner sep=2pt] (char) {#1};}}
\usepackage{enumitem}
%%%%%%COLOED CIRCLES
\usepackage{textcomp}
\usepackage{lettrine}
\usepackage{lipsum}
\usepackage{lmodern}
\usepackage{tcolorbox}
\usepackage[framemethod=TikZ]{mdframed}
%%%PROBLEMS BOX
\mdfdefinestyle{problems}{%
    linecolor=black,
    outerlinewidth=2pt,
    roundcorner=20pt,
    innertopmargin=\baselineskip,
    innerbottommargin=\baselineskip,
    innerrightmargin=20pt,
    innerleftmargin=20pt,
    backgroundcolor=gray!10!white}
%%%PROBLEMS BOX 
%%%PROBLEMS BOX 2
\usepackage{blindtext}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{tcolorbox}
\makeatletter
\newtcolorbox{mytcbox}[2][]{%
enhanced, 
breakable,
colback=white,
colframe=blue!30!black,
attach boxed title to top right={yshift=-2pt}, title={#2},
boxed title size=standard,
boxrule=0pt,
boxed title style={%
    sharp corners, 
    rounded corners=northeast, 
    colback=tcbcol@frame, 
    boxrule=0pt},
sharp corners=north,
overlay unbroken={%
    \path[fill=tcbcol@back] 
        ([xshift=2pt]title.south west) 
        to[out=180, in=0] ([xshift=-3.5cm]title.west)--
        (title.west-|frame.west) |- 
        ([xshift=2pt]title.south west)--cycle;
    \path[fill=tcbcol@frame] (title.south west) 
        to[out=180, in=0] ([xshift=-1.5cm]title.west)--
        (title.west-|frame.west)
        [rounded corners=\kvtcb@arc] |- 
        (title.north-|frame.north) 
        [sharp corners] -| (title.south west);
    \draw[line width=.5mm, rounded corners=\kvtcb@arc, 
        tcbcol@frame] 
        (title.north east) rectangle 
        (frame.south west);
}, 
overlay first={%
    \path[fill=tcbcol@back] 
        ([xshift=2pt]title.south west) 
        to[out=180, in=0] ([xshift=-1.5cm]title.west)--
        (title.west-|frame.west) |- 
        ([xshift=2pt]title.south west)--cycle;
    \path[fill=tcbcol@frame] (title.south west) 
        to[out=180, in=0] ([xshift=-1.5cm]title.west)--
        (title.west-|frame.west)
        [rounded corners=\kvtcb@arc] |- 
        (title.north-|frame.north) 
        [sharp corners] -| (title.south west);
    \draw[line width=.5mm, rounded corners=\kvtcb@arc, 
        tcbcol@frame] 
        (frame.south west) |- (title.north) -| 
        (frame.south east);
}, 
overlay middle={%
    \draw[line width=.5mm, tcbcol@frame] 
    (frame.north west)--(frame.south west) 
    (frame.north east)--(frame.south east);
}, 
overlay last={%
    \draw[line width=.5mm, rounded corners=\kvtcb@arc, 
        tcbcol@frame] 
        (frame.north west) |- (frame.south) -|
        (frame.north east);
}, 
#1
}
\makeatother
%%%PROBLEMS BOX 2
%%%DISCUSS BOX
\makeatletter

\def\tcb@shadow@lifted#1#2#3#4{%
  \path[fill,rounded corners=\tcb@outer@arc,#4]
       ([xshift=#1+#3,yshift=#2+#3]frame.south west)
    .. controls ([yshift=\dimexpr#3]frame.south) ..
       ([xshift=-#1-#3,yshift=#2+#3]frame.south east)
    -- ([xshift=-#1-#3,yshift=#2-#3]frame.north east)
    -- ([xshift=#1+#3,yshift=#2-#3]frame.north west)
    -- cycle;
}

\tcbset{
  lifted shadow/.style args={#1#2#3#4}{shad@w app={%
    \begin{scope}[#4]%
      \tcb@shadow@lifted{#1}{#2}{\dimexpr-4\dimexpr#3}{opacity=0.01}%
      \tcb@shadow@lifted{#1}{#2}{\dimexpr-3\dimexpr#3}{opacity=0.02}%
      \tcb@shadow@lifted{#1}{#2}{\dimexpr-2\dimexpr#3}{opacity=0.04}%
      \tcb@shadow@lifted{#1}{#2}{\dimexpr-#3}{opacity=0.07}%
      \tcb@shadow@lifted{#1}{#2}{0pt}{opacity=0.11}%
      \tcb@shadow@lifted{#1}{#2}{\dimexpr+#3}{opacity=0.11}%
      \tcb@shadow@lifted{#1}{#2}{\dimexpr+2\dimexpr#3}{opacity=0.07}%
      \tcb@shadow@lifted{#1}{#2}{\dimexpr+3\dimexpr#3}{opacity=0.04}%
      \tcb@shadow@lifted{#1}{#2}{\dimexpr+4\dimexpr#3}{opacity=0.02}%
      \tcb@shadow@lifted{#1}{#2}{\dimexpr+5\dimexpr#3}{opacity=0.01}%
  \end{scope}}},%
  drop lifted shadow/.style={lifted shadow={1.5mm}{-1.5mm}{0.12mm}{#1}},
  drop lifted shadow/.default={black!50!white},%
  drop heavy lifted shadow/.style={lifted shadow={2mm}{-3mm}{0.16mm}{#1}},
  drop heavy lifted shadow/.default={black!50!white},%
}

\makeatother
%%%DISCUSS BOX

%BOX FOR EQUATIONS
\usetikzlibrary{calc}
\newcommand*{\boxcolor}{blue!30!black}
\makeatletter
\renewcommand{\boxed}[1]{\textcolor{\boxcolor}{%
\tikz[baseline={([yshift=-1ex]current bounding box.center)}] \node [rectangle, minimum width=1ex,rounded corners,draw] {\normalcolor\m@th$\displaystyle#1$};}}
 \makeatother

%BOX FOR EQUATIONS


\usepackage{amsmath}
\usepackage[makeroom]{cancel}


\setlength{\columnsep}{.5cm}



\usepackage{exsheets}
\SetupExSheets{counter-format=se.qu}

\NewTasks[style=multiplechoice]{choices}[\choice]
\newcommand*\correct{\checkedchoicebox}

%TABLES
\usepackage{xcolor,colortbl}
\newcommand{\mc}[2]{\multicolumn{#1}{c}{#2}}
\usepackage{import}
\usepackage{subfiles}
%YELLOW NOTES
\setlength{\parskip}{0ex}
\setlength{\parindent}{0ex}

\newlength{\yellownotewidth}
\setlength{\yellownotewidth}{2.5cm}
\newlength{\yellownoteheight}
\setlength{\yellownoteheight}{2.5cm}
%   -   -   -   -   -   -   -   -   -   -   -   -
% Yellow note...
%   -   -   -   -   -   -   -   -   -   -   -   -
\newcommand{\resizeableyellownote}[3]{
\setlength{\yellownotewidth}{#1cm}
\setlength{\yellownoteheight}{#2cm}
\marginpar{
    \vspace{-0.5\yellownoteheight}
        \begin{center}
        \begin{tikzpicture}
            \draw[white,fill=gray!25,opacity=0.75,shift={(-0.125,-0.125)}] 
                (0,0) rectangle (\yellownotewidth,\yellownoteheight);
            \draw[fill=yellow!35] (0,0) rectangle (\yellownotewidth,\yellownoteheight);
            \draw[opacity=0.45,fill=gray!50] (0.7\yellownotewidth,0) -- 
                (0.9\yellownotewidth,0.45) -- (\yellownotewidth,0.4) -- cycle;
            \node[blue,below] at (0.5\yellownotewidth,\yellownoteheight) {
                \begin{minipage}{\yellownotewidth-1em}
                    \scriptsize\sf#3
                \end{minipage}
            };
        \end{tikzpicture}
        \end{center}
        \vspace{0.5\yellownoteheight}
    }
}
%YELLOW NOTES
%%%% CALCULATOR KEY
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{tikz}
\usetikzlibrary{shadows}
\newcommand*\keystroke[1]{%
  \tikz[baseline=(key.base)]
    \node[%
      draw,
      fill=white,
      drop shadow={shadow xshift=0.25ex,shadow yshift=-0.25ex,fill=black,opacity=0.75},
      rectangle,
      rounded corners=2pt,
      inner sep=1pt,
      line width=0.5pt,
      font=\scriptsize\sffamily
    ](key) {#1\strut}
  ;
}
%%%% CALCULATOR KEY

%HIGHLIGHT IN MATH
\newcommand{\hlmath}[1]{%
  \colorbox{black!20}{$\displaystyle#1$}}
  %HIGHLIGHT IN MATH
%EMAIL SEND
%\usepackage{etoolbox}
%\makeatletter
%\patchcmd{\l@chapter}% <cmd>
%  {\addvspace{0.5em \@plus\p@}}% <search>
%  {}% <replace>
%  {}{}% <success><failure>
%\makeatother
\usepackage{tocloft}
\renewcommand{\cftchapafterpnum}{\vspace{2pt}}

\makeatletter
\newcommand\myemail[3]{%                %\newcommand\tpj@compose@mailto[3]{%
\edef\@tempa{mailto:#1?subject=#2 }%
\edef\@tempb{\expandafter\html@spaces\@tempa\@empty}%
\href{\@tempb}{#3}}
\catcode\%=11
\def\html@spaces#1 #2{#1%20\ifx#2\@empty\else\expandafter\html@spaces\fi#2}
\catcode\%=14
\makeatother
\usepackage{hyperref}
%EMAIL SEND
%DECORATION LINE
\usepackage[object=vectorian]{pgfornament} %%  http://altermundus.com/pages/tkz/ornament/index.html
\newcommand{\sectionlinetwo}[2]{%
  \nointerlineskip \vspace{0.5\baselineskip}\hspace{\fill}
  {\color{#1}
    \resizebox{0.8\linewidth}{2ex}
    {{%
    {\begin{tikzpicture}
    \node  (C) at (0,0) {};
    \node (D) at (9,0) {};
    \path (C) to [ornament=#2] (D);
    \end{tikzpicture}}}}}%
    \hspace{\fill}
    \par\nointerlineskip \vspace{.5\baselineskip}
  }
%DECORATION LINE
% Periodic tabe
\usetikzlibrary{shapes,calc}

\ifpdf
  %
\else
  % Implement Outline text using pstricks if regular LaTeX->dvi->ps->pdf route
  \usepackage{pst-all}
\fi
% Periodic tabe
% QUOTES
\usepackage{ifxetex,ifluatex}
\usepackage[svgnames]{xcolor}
\usepackage{framed}
\newif\ifxetexorluatex
\ifxetex
  \xetexorluatextrue
\else
  \ifluatex
    \xetexorluatextrue
  \else
    \xetexorluatexfalse
  \fi
\fi
%
\ifxetexorluatex%
  \usepackage{fontspec}
  \usepackage{libertine} % or use \setmainfont to choose any font on your system
  \newfontfamily\quotefont[Ligatures=TeX]{Linux Libertine O} % selects Libertine as the quote font
\else
  \usepackage[utf8]{inputenc}
  \usepackage[T1]{fontenc}
  \usepackage{libertine} % or any other font package
  \newcommand*\quotefont{\fontfamily{LinuxLibertineT-LF}} % selects Libertine as the quote font
\fi
\newcommand*\quotesize{60} % if quote size changes, need a way to make shifts relative
% Make commands for the quotes
\newcommand*{\openquote}
   {\tikz[remember picture,overlay,xshift=-4ex,yshift=-2.5ex]
   \node (OQ) {\quotefont\fontsize{\quotesize}{\quotesize}\selectfont``};\kern0pt}

\newcommand*{\closequote}[1]
  {\tikz[remember picture,overlay,xshift=4ex,yshift={#1}]
   \node (CQ) {\quotefont\fontsize{\quotesize}{\quotesize}\selectfont''};}
% select a colour for the shading
\colorlet{shadecolor}{Azure}
\newcommand*\shadedauthorformat{\emph} % define format for the author argument

% Now a command to allow left, right and centre alignment of the author
\newcommand*\authoralign[1]{%
  \if#1l
    \def\authorfill{}\def\quotefill{\hfill}
  \else
    \if#1r
      \def\authorfill{\hfill}\def\quotefill{}
    \else
      \if#1c
        \gdef\authorfill{\hfill}\def\quotefill{\hfill}
      \else\typeout{Invalid option}
      \fi
    \fi
  \fi}
% wrap everything in its own environment which takes one argument (author) and one optional argument
% specifying the alignment [l, r or c]
%
\newenvironment{shadequote}[2][l]%
{\authoralign{#1}
\ifblank{#2}
   {\def\shadequoteauthor{}\def\yshift{-2ex}\def\quotefill{\hfill}}
   {\def\shadequoteauthor{\par\authorfill\shadedauthorformat{#2}}\def\yshift{2ex}}
\begin{snugshade}\begin{quote}\openquote}
{\shadequoteauthor\quotefill\closequote{\yshift}\end{quote}\end{snugshade}}
% QUOTES
% FRAMED BOX
\usepackage{mwe}
\usetikzlibrary{shadows}
\definecolor{mygreen}{rgb}{0.61,0.73,0.35}
\mdfdefinestyle{mystyle}{%
    innerlinewidth = 0.5pt,
    outerlinewidth = 2pt,
    linecolor = mygreen,
    tikzsetting = {draw = white, line width = 0.5pt},
    roundcorner=15pt,
    linecolor=mygreen,
    linewidth=2pt,
    topline=true,
    frametitleaboveskip=1.5\dimexpr-\ht\strutbox\relax,
}

\newenvironment{definition}[1][]{%
\ifstrempty{#1}%
    {\mdfsetup{%
    style = mystyle,
    }}%
    {\mdfsetup{%
    style = mystyle,
    frametitle={%
    \tikz{[baseline=(current bounding box.east),outer sep=0pt]
    \node[draw = white, line width = 2pt, text = white, anchor=east,rectangle,
    fill=mygreen, rounded corners, drop shadow]
    {\strut #1};
    }}}}%
    \begin{mdframed}[]\relax%
}{\end{mdframed}}
%FRAMED BOX

% NEW PROBLEMS BOX
\usepackage{tikz}
\usetikzlibrary{calc}

\xdefinecolor{mycolor3}{RGB}{62,96,111} % Neutral Blue
\colorlet{bancolor}{mycolor3}

\def\bancolor{mycolor3}
\newenvironment{mybox3}[3][]{%
    \begin{tikzpicture}[#1]%
        \def\myboxname{#3}%
        \node [draw,inner sep=1.5ex,text width=#2]% good options: minimum height, minimum width
            (BOXCONTENT) \bgroup\rule{0pt}{3ex}\ignorespaces
}{%
        \egroup;
        \node [right,inner xsep=1em,fill=bancolor!75,outer sep=0pt,text height=2ex,text depth=.5ex] (BOXNAME) 
            at ([shift={(-1em,0pt)}]BOXCONTENT.north west) {\myboxname};
        \fill[bancolor] (BOXNAME.north east) -- +(-1em,1em) -- +(-1em,0) -- cycle;
        \fill[bancolor] (BOXNAME.south west) -- +(1em,-1em) -- +(1em,0) -- cycle;
    \end{tikzpicture}
}
% NEW PROBLEMS BOX

\makeatletter
\newlength{\fullwidthlength}
\AtBeginDocument{\setlength{\fullwidthlength}{\@tufte@fullwidth}}
\makeatother

%%%%%% Formula with arrow
\usepackage{mathtools}
\usepackage{empheq}
\definecolor{myblue}{rgb}{.8, .7, 1}
\newcommand*\mybluebox[1]{%
\colorbox{myblue}{\hspace{1em}#1\hspace{1em}}}

\usepackage{amssymb}
\usepackage[customcolors,markings]{hf-tikz}

\tikzset{offset def/.style={
    above left offset={0.015,0.3},
    below right offset={-0.015,-0.12},
  },
  use color/.style={
    offset def,
    set fill color=white,
    set border color=#1,
  },
}

\newcommand{\annotate}[2][]{
\tikz[remember picture,overlay]\draw[#1,use marker id] (0,0.4) -- +(90:0.7cm)
 node[anchor=north,text=black,align=center] {#2};
}
\usetikzlibrary{positioning}
\tikzset{>=stealth}
\newcommand{\tikzmark}[3][]{\tikz[overlay,remember picture,baseline] \node [anchor=base,#1](#2) {#3};}
\usepackage[utf8]{inputenc}
%%%%%% Formula with arrow

%%%% FANCY COLOR TABLE
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{tcolorbox}
\usepackage{tabularx}
\usepackage{array}
\usepackage{colortbl}
\tcbuselibrary{skins}
\newcolumntype{Y}{>{\raggedleft\arraybackslash}X}

\tcbset{tab1/.style={fonttitle=\bfseries\large,fontupper=\normalsize\sffamily,
colback=yellow!10!white,colframe=red!75!black,colbacktitle=Salmon!40!white,
coltitle=black,center title,freelance,frame code={
\foreach \n in {north east,north west,south east,south west}
{\path [fill=red!75!black] (interior.\n) circle (3mm); };},}}
\tcbset{tab2/.style={enhanced,fonttitle=\bfseries,fontupper=\normalsize\sffamily,
colback=yellow!10!white,colframe=red!50!black,colbacktitle=Salmon!40!white,
coltitle=black,center title}}
%%%% FANCY COLOR TABLE


\usepackage{times}
\colorlet{helpful}{lime!70}
\colorlet{harmful}{red!30}
\colorlet{internal}{yellow!20}
\colorlet{external}{cyan!30}
\colorlet{G}{helpful!50!internal}
\colorlet{A}{harmful!50!internal}
\colorlet{O}{helpful!50!external}
\colorlet{T}{harmful!50!external}
\newcommand{\texta}{Given}
\newcommand{\textb}{Asking}
\newcommand{\textcn}{\rotatebox[origin=c]{90}{\parbox[t]{2cm}{\centering Analyze\\ the Problem}}}
\newcommand{\texts}{strength 1\par strength 2}
\newcommand{\textw}{weakness 1\par weakness 2}
\newcommand{\texto}{opportunity 1\par opportunity 2}
\newcommand{\textt}{threat 1\par threat 2}
\tcbset{swotbox/.style={size=normal, boxrule=0pt,
            colback=#1, watermark text=#1, width=.4\linewidth-5mm},
        header/.style={size=small, boxrule=0pt, width=.4\linewidth-5mm, colback=#1, valign=center, halign=center},
        firstcol/.style={header=#1, width=1cm}
        }
        
        
        \tcbset{%
  save height/.code={%
    \tcbset{breakable}%
    \providecommand{#1}{2cm}%
    \def\tcb@split@start{%
      \tcb@breakat@init%
      \tcb@comp@h@page%
      \def\tcb@ch{%
        \tcbset{height=\tcb@h@page}%
        \tcbdimto#1{#1+\tcb@h@page-\tcb@natheight}%
        \immediate\write\@auxout{\string\gdef\string#1{#1}}%
        \tcb@ch%
      }%
      \tcb@drawcolorbox@standalone%
    }%
  }%
}

%%%%%%%%% BACKGROUND IMAGE IN A BOX
\newsavebox\MBox
\newenvironment{Minipage}[1]
  {\par\smallskip\begin{lrbox}{\MBox}\begin{minipage}{#1}}
  {\end{minipage}\end{lrbox}%
   \makebox(0,0){\put(-24,-19){%
     \shadowimage[width=1.5\wd\MBox,height=2.1\ht\MBox]{paperpage}}}%
%     \includegraphics[width=1.8\wd\MBox,height=2.1\ht\MBox]{paperpage}}}%
   \usebox\MBox\par%
  }
\newenvironment{Minipage2}[1]
  {\par\smallskip\begin{lrbox}{\MBox}\begin{minipage}{#1}}
  {\end{minipage}\end{lrbox}%
   \makebox(0,0){\put(-31,-19){%
     \shadowimage[width=1.08\wd\MBox,height=2.4\ht\MBox]{paperpage}}}%
%     \includegraphics[width=1.8\wd\MBox,height=2.1\ht\MBox]{paperpage}}}%
   \usebox\MBox\par%
  }
%%%%%%%%% BACKGROUND IMAGE IN A BOX

%%% SHADOW IN AN IMAGE
\usetikzlibrary{shadows,calc}

\def\shadowshift{3pt,-3pt}
\def\shadowradius{6pt}

\colorlet{innercolor}{black!60}
\colorlet{outercolor}{gray!05}

\newcommand\drawshadow[1]{
    \begin{pgfonlayer}{shadow}
        \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.south west)+(\shadowshift)+(\shadowradius/2,\shadowradius/2)$) circle (\shadowradius);
        \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$) circle (\shadowradius);
        \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$) circle (\shadowradius);
        \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.north east)+(\shadowshift)+(-\shadowradius/2,-\shadowradius/2)$) circle (\shadowradius);
        \shade[top color=innercolor,bottom color=outercolor] ($(#1.south west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$) rectangle ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$);
        \shade[left color=innercolor,right color=outercolor] ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$) rectangle ($(#1.north east)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$);
        \shade[bottom color=innercolor,top color=outercolor] ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$) rectangle ($(#1.north east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$);
        \shade[outercolor,right color=innercolor,left color=outercolor] ($(#1.south west)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$) rectangle ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$);
        \filldraw ($(#1.south west)+(\shadowshift)+(\shadowradius/2,\shadowradius/2)$) rectangle ($(#1.north east)+(\shadowshift)-(\shadowradius/2,\shadowradius/2)$);
    \end{pgfonlayer}
}

\pgfdeclarelayer{shadow} 
\pgfsetlayers{shadow,main}

\newsavebox\mybox
\newlength\mylen

\newcommand\shadowimage[2][]{%
\setbox0=\hbox{\includegraphics[#1]{#2}}
\setlength\mylen{\wd0}
\ifnum\mylen<\ht0
\setlength\mylen{\ht0}
\fi
\divide \mylen by 120
\def\shadowshift{\mylen,-\mylen}
\def\shadowradius{\the\dimexpr\mylen+\mylen+\mylen\relax}
\begin{tikzpicture}
\node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[#1]{#2}};
\drawshadow{image}
\end{tikzpicture}}

%%% SHADOW IN AN IMAGE
%% TABULAR X ALIAS
\newcolumntype{Y}{>{\centering\arraybackslash}X} % for centering tables in tabularx
\def\tabularxcolumn#1{m{#1}}
\newcommand{\heading}[1]{\bfseries\begin{tabular}{@{}c@{}} #1 \end{tabular}}
%% TABULAR X ALIAS



%%%%%%%%%TITLEPAGE
\newcommand*{\titleBC}{\begingroup % Create the command for including the title page in the document
%\includegraphics[width=1\textwidth]{cover0}
%\newpage
%\incgraph[documentpaper,
%  overlay={\node[red] at (page.center) {\Huge Picture sized to paper};}]
%  [width=\paperwidth,height=\paperheight]{cover0}
%\newpage
\centering % Center all text

\def\CP{\textit{\Huge Experiments in College Chemistry I}} % Title

\settowidth{\unitlength}{\CP} % Set the width of the curly brackets to the width of the title
{\color{LightGoldenrod}\resizebox*{\unitlength}{\baselineskip}{\rotrt{$\}$}}} \\[\baselineskip] % Print top curly bracket
\textcolor{Sienna}{\CP} \\[\baselineskip] % Print title
{\color{RosyBrown}\Large AN OPENTEXTBOOK} \\ % Tagline or further description
{\color{Magenta}Version 2.0} \\ % Tagline or further description
{\color{LightGoldenrod}\resizebox*{\unitlength}{\baselineskip}{\rotlft{$\}$}}} % Print bottom curly bracket

\vfill % Whitespace between the title and the author name
 \includegraphics[width=0.8\textwidth]{coverfolder/cover}
 \vfill 
{\Large\textbf{Daniel Torres \& Luis Gonzalez-Urbina}}\\ % Author name
{\textbf{B.M.C.C.}}\\ % Author name
{\textbf{The City University of New York}}\\ % Author name
\vfill % Whitespace between the author name and the publisher logo

 \includegraphics[width=0.1\textwidth]{coverfolder/cc}\\[0.5\baselineskip] % Publisher logo
2017 % Year published


\endgroup}%%%%%%%%%% TITLE PAGE










%%%% PROBLEMS CHAPTER BOX
\mdfdefinestyle{conclusion}{%
innerleftmargin=0.3\linewidth,
innerrightmargin=0.1cm,
leftline=false,
rightline=false,
bottomline=false,
backgroundcolor=white,
linecolor=DarkGreen,
linewidth=4pt,
skipabove=\dimexpr\topskip+.5cm\relax,
settings={\setlist[itemize]{label=\color{DarkGreen}\rule[.25ex]{1ex}{1ex}}%
               \refstepcounter{section}},
frametitleaboveskip=\dimexpr-1.5\ht\strutbox\relax,
frametitle=%
 {%
  \null\llap{%
     \tikz[baseline=(current bounding box.east),outer sep=0pt,remember picture]
      \node[anchor=west,
             xshift=0cm,fill=DarkGreen,
             rounded corners,
             font=\color{white}\Huge\sffamily] (frametitle)%
                                                                 {CHAPTER~\thechapter};
               }%
  }
}

\newmdenv[style=conclusion]{conclusion}


\newcommand{\pol}[1]{\rlap{${}^{^{\color{red} \delta #1}}$}}
\usepackage{fancybox}


\usepackage{fontawesome}
\def\Plus{\texttt{+}}
\def\Minus{\texttt{-}}
\newenvironment{myenv}[1]
  {\mdfsetup{
    frametitle={\colorbox{white}{\space#1\space}},
    innertopmargin=0pt,
    frametitleaboveskip=-\ht\strutbox,
    frametitlealignment=\center
    }
  \begin{mdframed}%
  }
  {\end{mdframed}}

%%%% BOXES DIAGRAMS  FOR CARBS
\tikzset{
     block/.style={rectangle, draw, fill=red!40, text width=4em,
                   text centered, rounded corners, minimum height=3em},
     arrow/.style={-{Stealth[]}}
     }
\usetikzlibrary{positioning,arrows.meta}
%%%% BOXES DIAGRAMS  FOR CARBS



\usepackage{enumitem}
\SetLabelAlign{myright}{\hss\llap{$#1$}}
\newlist{where}{description}{1}
\setlist[where]{labelwidth=2cm,labelsep=1em,
                        leftmargin=!,align=myright,font=\normalfont}



\usepackage{smartdiagram}

\usepackage{PTSansNarrow}
\usepackage[T1]{fontenc}

\usetikzlibrary{matrix}


\usepackage{rotating}


\def\parsecomma#1,#2\endparsecomma{\def\page@x{#1}\def\page@y{#2}}
\tikzdeclarecoordinatesystem{page}{
    \parsecomma#1\endparsecomma
    \pgfpointanchor{current page}{north east}
    \pgf@xc=\pgf@x%
    \pgf@yc=\pgf@y%
    \pgfpointanchor{current page}{south west}
    \pgf@xb=\pgf@x%
    \pgf@yb=\pgf@y%
    \pgfmathparse{(\pgf@xc-\pgf@xb)/2.*\page@x+(\pgf@xc+\pgf@xb)/2.}
    \expandafter\pgf@x\expandafter=\pgfmathresult pt
    \pgfmathparse{(\pgf@yc-\pgf@yb)/2.*\page@y+(\pgf@yc+\pgf@yb)/2.}
    \expandafter\pgf@y\expandafter=\pgfmathresult pt
}
\makeatother




%%%% Add text in itemize
\newcounter{saveenumerate}
\usepackage{enumitem}
\setlist[enumerate]{itemsep=0mm}
\makeatletter
\newcommand{\enumeratext}[1]{%
\setcounter{saveenumerate}{\value{enum\romannumeral\the\@enumdepth}}
\end{enumerate}
#1
\begin{enumerate}
\setcounter{enum\romannumeral\the\@enumdepth}{\value{saveenumerate}}%
}
\makeatother






\usetikzlibrary{arrows,positioning}

%%%% COLOR ARROWS
\usetikzlibrary{shapes.arrows}
\makeatletter
\def\createshadingfromlist#1#2#3{%
  \pgfutil@tempcnta=0\relax
  \pgfutil@for\pgf@tmp:={#3}\do{\advance\pgfutil@tempcnta by1}%
  \ifnum\pgfutil@tempcnta=1\relax%
    \edef\pgf@spec{color(0)=(#3);color(100)=(#3)}%
  \else%
    \pgfmathparse{50/(\pgfutil@tempcnta-1)}\let\pgf@step=\pgfmathresult%
    %
    \pgfutil@tempcntb=1\relax%
    \pgfutil@for\pgf@tmp:={#3}\do{%
      \ifnum\pgfutil@tempcntb=1\relax%
        \edef\pgf@spec{color(0)=(\pgf@tmp);color(25)=(\pgf@tmp)}%
      \else%
        \ifnum\pgfutil@tempcntb<\pgfutil@tempcnta\relax%
          \pgfmathparse{25+\pgf@step/4+(\pgfutil@tempcntb-1)*\pgf@step}%
          \edef\pgf@spec{\pgf@spec;color(\pgfmathresult)=(\pgf@tmp)}%
        \else%
          \edef\pgf@spec{\pgf@spec;color(75)=(\pgf@tmp);color(100)=(\pgf@tmp)}%
        \fi%
      \fi%
      \advance\pgfutil@tempcntb by1\relax%
    }%
  \fi%
  \csname pgfdeclare#2shading\endcsname{#1}{100}\pgf@spec%
}

\createshadingfromlist{shading1}{horizontal}{red,yellow,green,cyan,blue}






%ACID CONJGATE BASE
\usetikzlibrary{calc,positioning}



%%% INVERT COLOR MAP
\def\customrevertcolormap#1{%
    \pgfplotsarraycopy{pgfpl@cm@#1}\to{custom@COPY}%
    \c@pgf@counta=0
    \c@pgf@countb=\pgfplotsarraysizeof{custom@COPY}\relax
    \c@pgf@countd=\c@pgf@countb
    \advance\c@pgf@countd by-1 %
    \pgfutil@loop
    \ifnum\c@pgf@counta<\c@pgf@countb
        \pgfplotsarrayselect{\c@pgf@counta}\of{custom@COPY}\to\pgfplots@loc@TMPa
        \pgfplotsarrayletentry\c@pgf@countd\of{pgfpl@cm@#1}=\pgfplots@loc@TMPa
        \advance\c@pgf@counta by1 %
        \advance\c@pgf@countd by-1 %
    \pgfutil@repeat
%\pgfplots@colormap@showdebuginfofor{#1}%
}%


%Extra practice problems box
\newtcolorbox[auto counter]{summary}[1][]{title={\bfseries Extra Practice Problems},enhanced,drop shadow={black!50!white},
  coltitle=black,
  top=0.3in,
  attach boxed title to top right=
  {xshift=0pt},
  boxed title style={size=small,colback=pink},#1}
%Extra practice problems box


%BRACKET FOR CHEMFIG
\newcommand\setpolymerdelim[2]{\def\delimleft{#1}\def\delimright{#2}}

\def\makebraces(#1,#2)#3#4#5{%
  \edef\delimhalfdim{\the\dimexpr(#1+#2)/2}%
  \edef\delimvshift{\the\dimexpr(#1-#2)/2}%
  \chemmove{
    \node[at=(#4),yshift=(\delimvshift)]
      {$
       \left\delimleft
         \vrule height\delimhalfdim depth\delimhalfdim width0pt
       \right.
      $};
    \node[at=(#5),yshift=(\delimvshift)]
      {$
        \left.
          \vrule height\delimhalfdim depth\delimhalfdim width0pt
        \right\delimright_{\rlap{#3}}
      $};
  }%
}


\usepackage[weather]{ifsym}%
%\usepackage{xymtexps}%PostScript Mode





%%%%% DNA
\usepackage{carbohydrates}
\definesubmol\nobond{[,0.2,,,draw=none]}
\definesubmol{adenine}{-[:72,,,,draw=none]\textcolor{blue}{N}(-[:-90]H)*5(-*6(-N=-N=(-NH_2)-=)--N=-)}
\definesubmol{adenine2}{-[:72,0.4,,,draw=none]\textcolor{blue}{N}*5(-*6(-N=-N=(-NH_2)-=)--N=-)}
\definesubmol{guanine}{-[:72,,,,draw=none]\textcolor{blue}{N}(-[:-90]H)*5(-*6(-N=(-[:-45]NH_2)-N(-[:45]H)-(=O)-=)--N=-)}
\definesubmol{guanine2}{-[:72,0.4,,,draw=none]\textcolor{blue}{N}*5(-*6(-N=(-[:-45]NH_2)-N(-[:45]H)-(=O)-=)--N=-)}

\definesubmol{uracil}{-[:90,,,,draw=none]\textcolor{blue}{N}(-[:-90]H)*6(-(=O)-N(-[:45]H)-(=O)-=-)}
\definesubmol{uracil2}{-[:90,0.4,,,draw=none]\textcolor{blue}{N}*6(-(=O)-N(-[:45]H)-(=O)-=-)}

\definesubmol{thymine}{-[:90,0.4,,,draw=none]\textcolor{blue}{N}(-[:-90]H)*6(-(=O)-N(-[:45]H)-(=O)-(-[:145]CH_3)=-)}
\definesubmol{thymine2}{-[:90,0.4,,,draw=none]\textcolor{blue}{N}*6(-(=O)-N(-[:45]H)-(=O)-(-[:145]CH_3)=-)}

\definesubmol{cytosine}{-[:90,,,,draw=none]\textcolor{blue}{N}(-[:-90]H)*6(-(=O)-N=(-NH_2)-=-)}
\definesubmol{cytosine2}{-[:90,0.4,,,draw=none]\textcolor{blue}{N}*6(-(=O)-N=(-NH_2)-=-)}

\definesubmol{ribose}{HO-[:90,0.5,2]?-[:60,1.0](-[:90,1.1]\textcolor{orange}{OH})-[:160,1.2]\textcolor{red}{O}-[:-160,1.2](-[:90,0.7](-[:180,0.9]H\textcolor{pink}{O}))-[:-60, 1.0]?(-[:-90,0.5]OH)}
\definesubmol{deoxyribose}{-[:90,0.5,2,,,draw=none]?-[:60,1.0](-[:90,1.1]OH)-[:160,1.2]\textcolor{red}{O}-[:-160,1.2](-[:90,0.7](-[:180,0.9]H\textcolor{pink}{O}))-[:-60, 1.0]?(-[:-90,0.5]OH)}
\definesubmol{phosphate}{-[6,.6]O-[6,1.5]P(-[4,.8]HO)(=[6,0.8]O)-[,1.5]O}
\newcommand*\derivesubmol[4]{%
    \saveexpandmode\saveexploremode\expandarg\exploregroups
    \csname @\ifcat\relax\noexpand#2first\else second\fi oftwo\endcsname
        {\expandafter\StrSubstitute\@car#2\@nil}
        {\expandafter\StrSubstitute\csname CF@@#2\endcsname}
    {\@empty#3}{\@empty#4}[\temp@]%
    \csname @\ifcat\relax\noexpand#1first\else second\fi oftwo\endcsname
        {\expandafter\let\@car#1\@nil}
        {\expandafter\let\csname CF@@#1\endcsname}\temp@
    \restoreexpandmode\restoreexploremode
}
\definesubmol{rt1}{-[2]rt1}
\definesubmol{rt2}{-[6,.6]rt2}
\definesubmol{rt3}{-[6,.6]rt3}
\definesubmol{ribose2}{%
    H\textcolor{pink}{O}-[:0,0.8]-[:-90,0.8]%
        (%
            -[:25,1.176]\textcolor{red}{O}%
            -[:-25,1.176]%
        )%
    -[:-45,0.8]%
        (%
          (-[:-90,0.8]OH)-[0,,,,line width=1pt,shorten <=-.5pt,shorten >=-.5pt]%
              (!{rt2})%
          -[:45,0.8]%
              (!{rt1})%
         )%
}
\definesubmol{deoxyribose2}{%
    H\textcolor{pink}{O}-[:0,0.8]-[:-90,0.8]%
        (%
            -[:25,1.176]\textcolor{red}{O}%
            -[:-25,1.176]%
        )%
    -[:-45,0.8]%
        (%
          (-[:-90,0.8]OH)-[0,,,,line width=1pt,shorten <=-.5pt,shorten >=-.5pt]%
              ()%
          -[:45,0.8]%
              (!{rt1})%
         )%
}
%\derivesubmol{deoxyribose2}{ribose2}{(!{rt2})}{   }
\definesubmol{deoxyribosephosphate}{%
    P(-[:-90,0.8]OH)(-[:90,0.8]OH)(=[:180,0.8]O)-\textcolor{pink}{O}-[:0,0.8]-[:-90,0.8]%
        (%
            -[:25,1.176]\textcolor{red}{O}%
            -[:-25,1.176]%
        )%
    -[:-45,0.8]%
        (%
          (-[:-90,0.8]OH)-[0,,,,,shorten <=-.5pt,shorten >=-.5pt]%
          -[:45,0.8]%
              (!{rt1})%
         )%
}
\definesubmol{ribosephosphate}{%
    P(-[:-90,0.8]OH)(-[:90,0.8]OH)(=[:180,0.8]O)-\textcolor{pink}{O}-[:0,0.8]-[:-90,0.8]%
        (%
            -[:25,1.176]\textcolor{red}{O}%
            -[:-25,1.176]%
        )%
    -[:-45,0.8]%
        (%
          (-[:-90,0.8]OH)-[0,,,,,shorten <=-.5pt,shorten >=-.5pt]%
          (-[:-90,0.8]OH)-[:45,0.8]%
              (!{rt1})%
         )%
}
%%%%% DNA



%%%% AMINO ACIDS
%chemical symbols
\newcommand{\glycine}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3} N^{+})([:-90]-H)([:90]-H)}}
%\newcommand{\proline}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:-90]-H)*5([:135]-CH_2-CH_2-H_2C-H_{2} N^{+}-)}}
\newcommand{\alanine}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:90]-CH_{3})([:-90]-H)}}
\newcommand{\valin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3} N^{+})([:90]-CH([:120]-CH_{3})([:60]-CH_{3}))([:-90]-H)}}
\newcommand{\leucin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-CH([:120]-CH_{3})([:60]-CH_{3})))}}
\newcommand{\isoleucin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH ([:90]-CH_{2}([:90]-CH_3))
    ([:180]-H_{3}C))}}
\newcommand{\methionin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-CH_{2}([:90]-S ([:90]-CH_{3}))))}}
\newcommand{\phenylalanin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-*6(-=-=-=)))}}
\newcommand{\tryptophan}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-([:60]*6(?=-NH-*6([:120]-=-=-)=?))))}}
\newcommand{\serin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-OH))}}
\newcommand{\threonin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-CH([:120]-OH)([:60]-CH_{3})))}}
\newcommand{\cystein}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-CH_{2}([:90]-SH)))}}
\newcommand{\tyrosin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-*6(-=-([:90]-OH)=-=)))}}
\newcommand{\asparagin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-C([:120]-NH_{2})([:60]=O)))}}
\newcommand{\glutamin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-CH_{2}([:90]-C([:120]-NH_{2})([:60]=O))))}}
\newcommand{\asparaginacid}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-C([:120]-O^{-})([:60]=O)))}}
\newcommand{\glutaminacid}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-CH_{2}([:90]-C([:120]-O^{-})([:60]=O))))}}
\newcommand{\lysin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-CH_{2}([:90]-CH_{2}([:90]-CH_{2}([:90]-NH_{3}^{+})))))}}
\newcommand{\arginin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}
    N^{+})([:-90]-H)([:90]-CH_{2}([:90]-CH_{2}([:90]-CH_{2}([:90]-NH([:90]-C([:90]-NH_{2})([:0]=NH_2^{+}))))))}}
%\newcommand{\histidin}{\footnotesize\chemfig{C([:0]-C(=[:30]O)(-[:-30]O^{-}))([:180]-H_{3}N^{+})([:-90]-H)([:90]-CH_{2}([:90]-([:60]*5(-NH-=NH^{+}-=))))}}

\newcommand{\proline}{\footnotesize
\chemfig{
  H-[2]
  C
  (-C(=[:45]O)(-[:-45]O|^{-}))
 *5([:135]-C|H_2-\chemabove{C}{H\mathrlap{_2}}-H_2|C-[,,,2]H_{2}|\chemabove{N}{\quad\scriptstyle+}-)
}
}

\newcommand{\histidin}{\footnotesize
\chemfig{
  H_{3}\chemabove{N}{\quad\scriptstyle+}-
  C
   ([:-90]-H)
   ([:90]
     -CH_{2}-
     ([:90]*5(-NH-[,,1]=\chemabove{\chemabove{N}{H}}{\hskip1.5em\scriptstyle+}-=))
   )
  -C(=[:45]O)(-[:-45]O|^{-})
}
}



% BRACET LIPID
\usetikzlibrary{decorations.pathreplacing}
\tikzset{brace/.style = { decorate, decoration={brace, amplitude=5pt} },}
% BRACET LIPID

%%%LIPIDS DISGRAMS
\@namedef{color@1}{red!40}
\@namedef{color@2}{green!40}   
\@namedef{color@3}{blue!40} 
\@namedef{color@4}{cyan!40}  
\@namedef{color@5}{magenta!40} 
\@namedef{color@6}{yellow!40}    

\newcommand{\graphitemize}[2]{%
\begin{tikzpicture}[every node/.style={align=center}]  
  \node[minimum size=4cm,circle,fill=gray!40,font=\Large,outer sep =.25cm,inner sep=.5cm](ce){#1};  
\foreach \gritem [count=\xi] in {#2}  {\global\let\maxgritem\xi}  

\foreach \gritem [count=\xi] in {#2}
{% 
\pgfmathtruncatemacro{\angle}{360/\maxgritem*\xi}
\edef\col{\@nameuse{color@\xi}}
\node[circle,
     ultra thick,
     draw=white,
     fill opacity=.5,
     fill=\col,outer sep=0.25cm,        
     minimum size=2cm] (satellite-\xi) at (\angle:5cm) {\gritem };
     \draw[line width=0.5cm,->,\col] (ce) -- (satellite-\xi);
     }%
\end{tikzpicture}  
}%




%%%% CHECKBOX
\usepackage{amssymb,tikz,pdftexcmds,xparse}
\tikzset{box/.style={
    minimum size=0.225cm,
    inner sep=0pt,
    draw,
  },  
  insert mark/.style={
    append after command={%
         node[inner sep=0pt,#1]
           at (\tikzlastnode.center){$\checkmark$}
     }     
  },
  insert bad mark/.style={
    append after command={%
         [shorten <=\pgflinewidth,shorten >=\pgflinewidth]
         (\tikzlastnode.north west)edge[#1](\tikzlastnode.south east)
         (\tikzlastnode.south west)edge[#1](\tikzlastnode.north east)
     }     
  },
}
\makeatletter
\NewDocumentCommand{\tikzcheckmark}{O{} m}{%
  \ifnum\pdf@strcmp{#2}{mark}=\z@%
    \tikz[baseline=-0.5ex]\node[box,insert mark={#1},#1]{};%
  \fi%
  \ifnum\pdf@strcmp{#2}{bad mark}=\z@%
    \tikz[baseline=-0.5ex]\node[box,insert bad mark={#1},#1]{};%
  \fi%
  \ifnum\pdf@strcmp{#2}{no mark}=\z@%
    \tikz[baseline=-0.5ex]\node[box,#1]{};%
  \fi%
}
\makeatother
%%%%CHECKBOX



\definecolor{mybrown}{RGB}{128,64,0}
\usepackage{everypage}%%% SIDEBAR ON PAGES
\usepackage{scrlayer}
\DeclareNewLayer[
  background,
  outermargin,
  addhoffset=\marginparsep,
  contents={\color{gray!50}\rule{\layerwidth}{\layerheight}}
]{sidebar.bg}
\makeatletter
\DeclareNewLayer[
  clone=sidebar.bg,
  addhoffset=1em,
  addwidth=-1em,
  contents={\parbox[b][\layerheight]{\layerwidth}{\raggedright\@sidebar}}
]{sidebar.txt}
\newcommand\@sidebar{}
\newcommand\sidebar[1]{\renewcommand\@sidebar{#1}}
\makeatother
\DeclareNewPageStyleByLayers{sidebar}{sidebar.bg,sidebar.txt}%%% SIDEBAR ON PAGES
\usepackage{makecell}




\definecolor{TableBorder}{rgb}{0.0078,0.6824,0.7882}

\definecolor{TableEven}{rgb}{0.8000,0.9216,0.9490}

\definecolor{TableOdd}{rgb}{1,1,1}

\DeclareDocumentCommand\newstep{o}{%
\item\IfNoValueTF{#1}{}{#1 \textendash\xspace}}
\newlist{steps}{enumerate}{1}
\setlist[steps]{label={} \textit{Step \arabic*:},leftmargin=*}

\newwrite\tempfile
\makeatletter
\DeclareDocumentCommand \sidenote {m O{Pbardefault} O{Plightdefault}} {%
\stepcounter{localsidenotecounter}%
\hyperlink{sidenote\arabic{localsidenotecounter}}{${}^\textrm{\footnotesize\arabic{localsidenotecounter}}$}%
\immediate\write\tempfile%
{%
\noexpand\Pnotebox{#2}{#3}{%
\noexpand\footnotesize \noexpand{\noexpand\hypertarget{sidenote\arabic{localsidenotecounter}}{${}^{\arabic{localsidenotecounter}}$} \unexpanded{#1 }}%
}}}
\makeatother
\usepackage{array,multirow,graphicx}


%Numbers in circle
\newcommand{\mycircled}[1]{%
 \begin{tikzpicture}[baseline={(char.base)}]
   \node (char) {#1};
   \node[draw,circle,minimum size=16pt,inner sep=0pt,overlay] (char.center){};
 \end{tikzpicture}
 }
%Numbers in circle



%nucleotides

\derivesubmol{deoxyadenosine}{deoxyribose2}{!{rt1}}{-[2,1.0]!{adenine2}}
\derivesubmol{deoxythymidine}{deoxyribose2}{!{rt1}}{-[2,1.0]!{thymine2}}
\derivesubmol{deoxyuridine}{deoxyribose2}{!{rt1}}{-[2,1.0]!{uracil2}}
\derivesubmol{deoxyguaninephosphate}{deoxyribosephosphate}{!{rt1}}{-[2,1.0]!{guanine2}}
\derivesubmol{deoxyuridinephosphate}{deoxyribosephosphate}{!{rt1}}{-[2,1.0]!{uracil2}}
\derivesubmol{thyminephosphate}{ribosephosphate}{!{rt1}}{-[2,1.0]!{thymine2}}
\derivesubmol{cytosinephosphate}{ribosephosphate}{!{rt1}}{-[2,1.0]!{cytosine2}}
\derivesubmol{deoxyadenosinephosphate}{deoxyribosephosphate}{!{rt1}}{-[2,1.0]!{adenine2}}



%% CIRCLE LEWIS
\newcommand*\circleatom[1]{\tikz\node[circle, fill=green!30]{\printatom{#1}};}
%% CIRCLE LEWIS

%%% ORBITAL DIAGRAMS
\usepackage{tcolorbox}% no need in this mwe
\usepackage[font=small]{caption}% no need in this mwe
\usepackage{float}% no need in this mwe
\usepackage{floatflt}% no need in this mwe
\usepackage{tikz}
\usepackage{tikzorbital}\savesymbol{orbital}

\usetikzlibrary{fadings,patterns,backgrounds,fit,arrows}
\pgfdeclarelayer{backbackground}
\pgfsetlayers{backbackground,background,main}
\usepackage{amssymb} % for harpoons
\newcommand{\electron}[2]{{%
        \newcommand*\up{\fbox{$\mathord\upharpoonleft\phantom{\downharpoonright}$}}%
        \newcommand*\dwn{\fbox{$\mathord\downharpoonleft\phantom{\upharpoonright}$}}%
        \newcommand*\updwn{\fbox{$\upharpoonleft\downharpoonright$}}%
        \newcommand*\emp{\fbox{$\phantom{\downharpoonright}\phantom{\downharpoonright}$}}%
        \setlength\tabcolsep{0pt}% remove extra horizontal space from tabular
        \begin{tabular}{c}#2\\[2pt]#1\end{tabular}}}%
%%% ORBITAL DIAGRAMS

%%%%EXAMPLE BOX
\definecolor{mybrown}{RGB}{128,64,0}
\mdfdefinestyle{mystyle}{%
linecolor=black,outerlinewidth=1pt,%
frametitlerule=true,frametitlefont=\sffamily\bfseries\color{white},%
frametitlerulewidth=1pt,frametitlerulecolor=black,%
frametitlebackgroundcolor=black,
backgroundcolor=mybrown!05,
innertopmargin=\topskip,
roundcorner=5pt
}
\mdtheorem[style=mystyle]{example}{Example}

\gdef\Sepline{%
  \par\noindent\makebox[\linewidth][l]{%
  \hspace*{-\mdflength{innerleftmargin}}%
   \tikz\draw[thick,dashed,gray!60] (0,0) --%
        (\textwidth+\the\mdflength{innerleftmargin}+\the\mdflength{innerrightmargin},0);
  }\par\nobreak}
%%%%EXAMPLE BOX

\definecolor{tableShade}{gray}{0.9}


\definecolor{bidentitlebg}{RGB}{158,59,255}%YOUR TUBE
\newtcolorbox{ridentidad}[1][]{
  enhanced,
  frame code={
    \fill[draw=white,top color=white,bottom color=blue!60]
      ([xshift=-20pt]title.north west) --
      (title.south west) --
      (title.south east) --
      ([xshift=20pt]title.north east) -- cycle;
    \draw[blue,line width=0.4mm,rounded corners]
      (frame.north west) --
      (frame.south west) --
      ([xshift=-20pt]title.north west) --
      (title.south west) --
      (title.south east) --
      ([xshift=20pt]title.north east) --
      (frame.south east) --
      (frame.north east);
  },
  coltitle=blue!75!black,
  colback=white,
  attach boxed title to bottom center,
  boxed title style={empty},
  fonttitle=\bfseries\sffamily,
  title=\strut Visual,
  #1,
}%YOUR TUBE










%%%%% COLOR TABLE
\usepackage{environ}
\usepackage{longtable}
\newcommand*\rot{\rotatebox{90}}
\usepackage{chemfig}
\def\Z{  0 & 0 & 12 & Working with leaflets & Claudio Fiandrino\\}
\def\ZZ{\Z\Z\Z\Z}\def\ZZZ{\ZZ\ZZ\ZZ\ZZ}\def\ZZZZ{\ZZZ\ZZZ\ZZZ\ZZZ}

% some stuff common to short and long tables
\definecolor{tablecolor}{named}{ForestGreen}
\newcommand{\header}[1]{%
  \multicolumn{1}{c}{%
    \cellcolor{tablecolor}\color{white}\bfseries#1}}
\newcommand{\rndtablesetup}{%
  \addtolength{\extrarowheight}{1ex}%
  \rowcolors{2}{tablecolor!20}{tablecolor!40}%
  \sffamily}

% styles for the clipping/internal nodes
\tikzset{
  myclip/.style={rounded corners=1ex},
  mynode/.style={anchor=south west,inner sep=0pt,outer sep=0pt},
  mybord/.style={myclip,very thick,tablecolor},
}

% the short table (provided)
\newsavebox{\tablebox}
\NewEnviron{rndtable}[1]{%
  \rndtablesetup%
  \savebox{\tablebox}{%
    \begin{tabular}{#1}%
      \BODY%
    \end{tabular}}%
  \begin{tikzpicture}
    \clip[myclip] (0,-\dp\tablebox) -- (\wd\tablebox,-\dp\tablebox) --
      (\wd\tablebox,\ht\tablebox) -- (0,\ht\tablebox) -- cycle;
    \node[mynode] at (0,-\dp\tablebox) {\usebox{\tablebox}};
    \draw[mybord] (0,-\dp\tablebox) -- (\wd\tablebox,-\dp\tablebox) --
      (\wd\tablebox,\ht\tablebox) -- (0,\ht\tablebox) -- cycle;
  \end{tikzpicture}}

% round top
\newcommand{\roundtop}[1]{%
  \begin{tikzpicture}
    \clip[myclip] (0,0) |- (\wd#1,\ht#1+\dp#1) -- (\wd#1,0);
    \draw[mybord] (0,0) |- (\wd#1,\ht#1+\dp#1) -- (\wd#1,0);
    \node[mynode] at (0,0) {\box#1};
  \end{tikzpicture}}

% round bottom
\newcommand{\roundbot}[1]{%
  \begin{tikzpicture}
    \clip[myclip] (0,0) |- (\wd#1,-\ht#1+\dp#1) -- (\wd#1,0);
    \draw[mybord] (0,0) |- (\wd#1,-\ht#1+\dp#1) -- (\wd#1,0);
    \node[mynode] at (0,0) {\box#1};
  \end{tikzpicture}}

% frame midsections
\newcommand{\framemid}[1]{%
  \begin{tikzpicture}
    \draw[mybord] (0,0) -- (0,\ht#1+\dp#1) (\wd#1,0) -- (\wd#1,\ht#1+\dp#1);
    \node[mynode] at (0,0) {\box#1};
  \end{tikzpicture}}




\usepackage{tcolorbox}% no need in this mwe
\usepackage[font=small]{caption}% no need in this mwe
\usepackage{float}% no need in this mwe
\usepackage{floatflt}% no need in this mwe
\usepackage{tikz}
\usepackage{tikzorbital}
\usetikzlibrary{fadings,patterns,backgrounds,fit,arrows}
\pgfdeclarelayer{backbackground}
\pgfsetlayers{backbackground,background,main}




\usepackage{adjustbox}


%%%%%%%%%%%%%%%%%%%LIGHT SPECTRUM
\usepackage{siunitx} % SI-units
\usepackage{pgfplots}
\usepgfplotslibrary{units} % to add units easily to axis
\usepgfplotslibrary{fillbetween} % to fill inbetween curves
\usepgfplotslibrary{colormaps} % to create colormaps
\pgfplotsset{width=12.2cm, height=7cm}
\pgfplotsset{compat=newest} %(making it only compatalbe with
%new releases of pgfplots)
\pgfdeclarehorizontalshading{visiblelight}{50bp}{
color(0.00000000000000bp)=(violet);
color(8.33333333333333bp)=(blue);
color(16.66666666666670bp)=(cyan);
color(25.00000000000000bp)=(green);
color(33.33333333333330bp)=(yellow);
color(41.66666666666670bp)=(orange);
color(50.00000000000000bp)=(red)
}%
%%%%%%%%%%%%%%%%%%%LIGHT SPECTRUM

\usetikzlibrary{shapes.geometric}
\usetikzlibrary{arrows,decorations.pathmorphing}
\usepackage{modiagram}
\usetikzlibrary{decorations.markings} 

\definecolor{myyellow}{RGB}{254,241,24}
\definecolor{myorange}{RGB}{234,125,1}
\usepackage{tikz}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{arrows}
\usepackage{nicefrac}
\usepackage[switch, modulo]{lineno}

\usetikzlibrary{chains,matrix}

\newcommand{\moup}{$\uparrow$}
\newcommand{\modown}{$\downarrow$}
\newcommand{\moupdown}{$\uparrow\,\downarrow$}



% Style to set TikZ camera angle, like PGFPlots `view`
\tikzset{viewport/.style 2 args={
    x={({cos(-#1)*1cm},{sin(-#1)*sin(#2)*1cm})},
    y={({-sin(-#1)*1cm},{cos(-#1)*sin(#2)*1cm})},
    z={(0,{cos(#2)*1cm})}
}}

% Styles to plot only points that are before or behind the sphere.
\pgfplotsset{only foreground/.style={
    restrict expr to domain={rawx*\CameraX + rawy*\CameraY + rawz*\CameraZ}{-0.05:100},
}}
\pgfplotsset{only background/.style={
    restrict expr to domain={rawx*\CameraX + rawy*\CameraY + rawz*\CameraZ}{-100:0.05}
}}

% Automatically plot transparent lines in background and solid lines in foreground
\def\addFGBGplot[#1]#2;{
    %\addplot3[#1,only background, opacity=0.25] #2;
    \addplot3[#1,only foreground] #2;
}

\newcommand{\ViewAzimuth}{-20}
\newcommand{\ViewElevation}{30}

\pgfmathsetmacro{\CameraX}{sin(\ViewAzimuth)*cos(\ViewElevation)}
\pgfmathsetmacro{\CameraY}{-cos(\ViewAzimuth)*cos(\ViewElevation)}
\pgfmathsetmacro{\CameraZ}{sin(\ViewElevation)}
\newsavebox\mononut
\sbox\mononut{
\begin{tikzpicture}
    % Compute camera unit vector for calculating depth
    \begin{scope}
      \draw[thin,blue!50] (0,0) circle (1);
      \begin{axis}[
            hide axis,
            view={\ViewAzimuth}{\ViewElevation},     % Set view angle
            disabledatascaling,                      % Align PGFPlots coordinates with TikZ
            anchor=origin,                           % Align PGFPlots coordinates with TikZ
            viewport={\ViewAzimuth}{\ViewElevation}, % Align PGFPlots coordinates with TikZ
        ]
        % Plot equator and two longitude lines with occlusion
        \pgfplotsinvokeforeach{30,60,...,150}{
        \addFGBGplot[blue!50,thick,domain=0:2*pi, samples=100, samples y=1] 
        ({cos(deg(x))*sin(#1)}, {sin(deg(x))*sin(#1)}, {cos(#1)});
        }
        %\addFGBGplot[domain=0:2*pi, samples=100, samples y=1] (0, {sin(deg(x))}, {cos(deg(x))});
        \pgfplotsinvokeforeach{90,125,160}{
        \addFGBGplot[blue!50,thick,domain=0:2*pi, samples=100, samples y=1]
        ({sin(deg(x))*sin(#1)},{cos(#1)}, {cos(deg(x))*sin(#1)});}
      \end{axis}
    \end{scope}
\end{tikzpicture}
}
\newsavebox\mononutdashed
\sbox\mononutdashed{
\begin{tikzpicture}
    % Compute camera unit vector for calculating depth
    \begin{scope}
      \draw[thin,blue!50,dashed] (0,0) circle (1);
      \begin{axis}[
            hide axis,
            view={\ViewAzimuth}{\ViewElevation},     % Set view angle
            disabledatascaling,                      % Align PGFPlots coordinates with TikZ
            anchor=origin,                           % Align PGFPlots coordinates with TikZ
            viewport={\ViewAzimuth}{\ViewElevation}, % Align PGFPlots coordinates with TikZ
        ]
        % Plot equator and two longitude lines with occlusion
        \pgfplotsinvokeforeach{30,60,...,150}{
        \addFGBGplot[blue!50,dashed,thick,domain=0:2*pi, samples=100, samples y=1] 
        ({cos(deg(x))*sin(#1)}, {sin(deg(x))*sin(#1)}, {cos(#1)});
        }
        %\addFGBGplot[domain=0:2*pi, samples=100, samples y=1] (0, {sin(deg(x))}, {cos(deg(x))});
        \pgfplotsinvokeforeach{90,125,160}{
        \addFGBGplot[blue!50,dashed,thick,domain=0:2*pi, samples=100, samples y=1]
        ({sin(deg(x))*sin(#1)},{cos(#1)}, {cos(deg(x))*sin(#1)});}
      \end{axis}
    \end{scope}
\end{tikzpicture}
}
\newsavebox\peanut
\sbox\peanut{
\begin{tikzpicture}
    \begin{scope}
      \draw[thin,blue!50] (45:1) arc(45:315:1);
      \clip (45:1) arc(45:315:1);
      \begin{axis}[
            hide axis,
            view={\ViewAzimuth}{\ViewElevation},     % Set view angle
            disabledatascaling,                      % Align PGFPlots coordinates with TikZ
            anchor=origin,                           % Align PGFPlots coordinates with TikZ
            viewport={\ViewAzimuth}{\ViewElevation}, % Align PGFPlots coordinates with TikZ
        ]
        % Plot equator and two longitude lines with occlusion
        \pgfplotsinvokeforeach{30,60,...,150}{
        \addFGBGplot[blue!50,thick,domain=0:2*pi, samples=100, samples y=1] 
        ({cos(deg(x))*sin(#1)}, {sin(deg(x))*sin(#1)}, {cos(#1)});
        }
        %\addFGBGplot[domain=0:2*pi, samples=100, samples y=1] (0, {sin(deg(x))}, {cos(deg(x))});
        \pgfplotsinvokeforeach{90,125,160}{
        \addFGBGplot[blue!50,thick,domain=0:2*pi, samples=100, samples y=1]
        ({sin(deg(x))*sin(#1)},{cos(#1)}, {cos(deg(x))*sin(#1)});}
      \end{axis}
    \end{scope}
    \begin{scope}[xshift={1.4cm}]
      \draw[thin,blue!50] (225:1) arc(225:225+270:1);
      \clip (225:1) arc(225:225+270:1);
      \begin{axis}[
            hide axis,
            view={\ViewAzimuth}{\ViewElevation},     % Set view angle
            disabledatascaling,                      % Align PGFPlots coordinates with TikZ
            anchor=origin,                           % Align PGFPlots coordinates with TikZ
            viewport={\ViewAzimuth}{\ViewElevation}, % Align PGFPlots coordinates with TikZ
        ]
        % Plot equator and two longitude lines with occlusion
        \pgfplotsinvokeforeach{30,60,...,150}{
        \addFGBGplot[blue!50,thick,domain=0:2*pi, samples=100, samples y=1] 
        ({cos(deg(x))*sin(#1)}, {sin(deg(x))*sin(#1)}, {cos(#1)});
        }
        %\addFGBGplot[domain=0:2*pi, samples=100, samples y=1] (0, {sin(deg(x))}, {cos(deg(x))});
        \pgfplotsinvokeforeach{95,125,160}{
        \addFGBGplot[blue!50,thick,domain=0:2*pi, samples=100, samples y=1]
        ({sin(deg(x))*sin(#1)},{cos(#1)}, {cos(deg(x))*sin(#1)});}
      \end{axis}
    \end{scope}
\end{tikzpicture}
}
\newsavebox\peanutdashed
\sbox\peanutdashed{
\begin{tikzpicture}
    \begin{scope}
      \draw[thin,blue!50,dashed] (45:1) arc(45:315:1);
      \clip (45:1) arc(45:315:1);
      \begin{axis}[
            hide axis,
            view={\ViewAzimuth}{\ViewElevation},     % Set view angle
            disabledatascaling,                      % Align PGFPlots coordinates with TikZ
            anchor=origin,                           % Align PGFPlots coordinates with TikZ
            viewport={\ViewAzimuth}{\ViewElevation}, % Align PGFPlots coordinates with TikZ
        ]
        % Plot equator and two longitude lines with occlusion
        \pgfplotsinvokeforeach{30,60,...,150}{
        \addFGBGplot[blue!50,dashed,thick,domain=0:2*pi, samples=100, samples y=1] 
        ({cos(deg(x))*sin(#1)}, {sin(deg(x))*sin(#1)}, {cos(#1)});
        }
        %\addFGBGplot[domain=0:2*pi, samples=100, samples y=1] (0, {sin(deg(x))}, {cos(deg(x))});
        \pgfplotsinvokeforeach{90,125,160}{
        \addFGBGplot[blue!50,dashed,thick,domain=0:2*pi, samples=100, samples y=1]
        ({sin(deg(x))*sin(#1)},{cos(#1)}, {cos(deg(x))*sin(#1)});}
      \end{axis}
    \end{scope}
    \begin{scope}[xshift={1.4cm}]
      \draw[thin,blue!50,dashed] (225:1) arc(225:225+270:1);
      \clip (225:1) arc(225:225+270:1);
      \begin{axis}[
            hide axis,
            view={\ViewAzimuth}{\ViewElevation},     % Set view angle
            disabledatascaling,                      % Align PGFPlots coordinates with TikZ
            anchor=origin,                           % Align PGFPlots coordinates with TikZ
            viewport={\ViewAzimuth}{\ViewElevation}, % Align PGFPlots coordinates with TikZ
        ]
        % Plot equator and two longitude lines with occlusion
        \pgfplotsinvokeforeach{30,60,...,150}{
        \addFGBGplot[blue!50,dashed,thick,domain=0:2*pi, samples=100, samples y=1] 
        ({cos(deg(x))*sin(#1)}, {sin(deg(x))*sin(#1)}, {cos(#1)});
        }
        %\addFGBGplot[domain=0:2*pi, samples=100, samples y=1] (0, {sin(deg(x))}, {cos(deg(x))});
        \pgfplotsinvokeforeach{95,125,160}{
        \addFGBGplot[blue!50,dashed,thick,domain=0:2*pi, samples=100, samples y=1]
        ({sin(deg(x))*sin(#1)},{cos(#1)}, {cos(deg(x))*sin(#1)});}
      \end{axis}
    \end{scope}
\end{tikzpicture}
}



\usepackage{tikz,tikz-3dplot}

\definecolor{color1}{RGB}{ 86, 180, 233} % Skyblue
\definecolor{color2}{RGB}{230, 159,   0} % Orange


%%%%%%%%PHASE DIAGRAM
\usepgfplotslibrary{fillbetween}
\tikzset{vcol/.code={\colorlet{vcol}{#1}},hcol/.code={\colorlet{hcol}{#1}},vcol=red,hcol=blue}
\pgfdeclarefunctionalshading[vcol,hcol]{azimuth}{\pgfpointorigin}%
{\pgfpoint{50bp}{50bp}}%
{%
\pgfshadecolortorgb{vcol}{\mycola}%
\pgfshadecolortorgb{hcol}{\mycolb}
}{%
atan 90 div dup dup 
\mycolablue \mycolbblue sub mul \mycolablue exch sub 3 1 roll
\mycolagreen \mycolbgreen sub mul \mycolagreen exch sub exch 
\mycolared \mycolbred sub mul \mycolared exch sub 3 1 roll exch 
}%%%%%%%%PHASE DIAGRAM
\usepackage{spath}
\usetikzlibrary{fadings}

\usetikzlibrary{shapes}


\usetikzlibrary{calc}
\usepackage{nicefrac}


\tikzfading[name=fade inside,
inner color=transparent!0,
outer color=transparent!0] 


\usepgfplotslibrary{fillbetween}

\tikzset{vcol/.code={\colorlet{vcol}{#1}},hcol/.code={\colorlet{hcol}{#1}},vcol=red,hcol=blue}
\pgfdeclarefunctionalshading[vcol,hcol]{azimuth}{\pgfpointorigin}%
{\pgfpoint{50bp}{50bp}}%
{%
\pgfshadecolortorgb{vcol}{\mycola}%
\pgfshadecolortorgb{hcol}{\mycolb}
}{%
atan 90 div dup dup 
\mycolablue \mycolbblue sub mul \mycolablue exch sub 3 1 roll
\mycolagreen \mycolbgreen sub mul \mycolagreen exch sub exch 
\mycolared \mycolbred sub mul \mycolared exch sub 3 1 roll exch 
}



%%%%%%%LARGE EXPONETIAL
\usepackage{scalerel}
\usepackage{amsmath}
\newlength\tempdimA
\newlength\tempdimB
\def\myexp#1{\setbox0=\hbox{$\strut#1$}\tempdimA=\dimexpr\ht0+\dp0\relax%
  \tempdimB=\dimexpr.45\ht0+\dp0\relax%
  \scaleto{e}{.666\tempdimA}% THE e WILL BE .666 THE HEIGHT+DEPTH OF THE EXPONENT
  \raisebox{\tempdimB}{\box0}}
%%%%%%%LARGE EXPONETIAL

\newcolumntype{L}{>{\raggedright\arraybackslash}X}
\newcommand\Cancel[1]{\cancel{\ce{#1}}}
\usepackage{chemmacros}
\usechemmodule{redox,reactions}
\restoresymbol{chem}{orbital}
\restoresymbol{tikz}{orbital}

%%%%COVER DESIGN
\usetikzlibrary{lindenmayersystems}
\usetikzlibrary[shadings]
\usepackage{emerald}% for 1-4

\usepackage{titlesec}
\usepackage{textpos}

\DeclareFixedFont{\chapternumberfont}{T1}{ppl}{}{}{1.5in}
\titleformat{name=\subsection, numberless}[display]{\Huge\bfseries\sffamily\color{white}}{
%\thispagestyle{empty}
\begin{tikzpicture}[overlay, remember picture]
        \path let \p1 = (current page.west), \p2 = (current page.east) in
              node[minimum width=\x2-\x1, minimum height=5cm, rectangle, fill=cyan, anchor=north west, align=left, text width=\x2-\x1] at ($(current page.north west)$) {
                \begin{textblock*}{5in}(\dimexpr\x2-4.5in,\dimexpr0.25\headheight-1in)
                    \tikz \node [white,text width=2in, align=right, font=\sffamily] {{\normalsize DIGITAL MEDIA PRIMER}\\[12pt] \raisebox{50pt}{{\large \chaptertitlename}} \raisebox{-12pt}{\chapternumberfont \thechapter}};
                \end{textblock*}
              };
        \path let \p1 = (current page.west), \p2 = (current page.east) in
              node[minimum width=\x2-\x1, minimum height=0.8in, rectangle, fill=cyan!50, anchor=south west, align=left, text width=\x2-\x1] at ($(current page.south west)$) {};
\end{tikzpicture}
}{-1.75in}{}[\vspace*{1in}]

\definecolor{gmitblue}{RGB}{93,138,168}
\definecolor{gmitred}{RGB}{241, 148, 138}

%%%%%%%%%%PAGE STYLE FOR THE READER
\fancypagestyle{style1}{
\fancyhf{}
\fancyhead[C]{%
\begin{tikzpicture}[overlay, remember picture]%
    \fill[gmitblue] (current page.north west) rectangle ($(current page.north east)+(0,-1in)$);
    \node[anchor=north west, text=white, font=\Large\scshape, minimum size=1in, inner xsep=5mm] at (current page.north west) {\hspace{1cm} \Huge To The Reader};
%    \node[anchor=north east, minimum size=1in, inner xsep=5mm] at (current page.north east) {\includegraphics[scale=.1]{example-image-a}};
      %node[minimum width=\x2-\x1, minimum height=2cm, draw, rectangle, fill=blue!20, anchor=north west, align=left, text width=\x2-\x1] at ($(current page.north west)$) {\Large\bfseries \quad #1};
\end{tikzpicture}
}
\fancyfoot[CE]{
    \begin{tikzpicture}[overlay, remember picture]%
    \fill[gmitblue] (current page.south west) rectangle ($(current page.south east)+(0,.5in)$);
    \node[anchor=south west, text=white, font=\Large, minimum size=.5in] at (current page.south west) {\thepage};
%    \node[anchor=south, text=white, font=\large, minimum size=.5in] at (current page.south) {\leftmark};
    \node[anchor=south east, text=white, font=\large, minimum size=.5in, inner xsep=5mm] at (current page.south east) {\today};
\end{tikzpicture}
}
\fancyfoot[CO]{
    \begin{tikzpicture}[overlay, remember picture]%
    \fill[gmitblue] (current page.south west) rectangle ($(current page.south east)+(0,.5in)$);
    \node[anchor=south west, text=white, font=\large, minimum size=.5in, inner xsep=5mm] at (current page.south west) {\today};
%    \node[anchor=south, text=white, font=\large, minimum size=.5in] at (current page.south) {\leftmark};
    \node[anchor=south east, text=white, font=\Large, minimum size=.5in] at (current page.south east) {\thepage};
\end{tikzpicture}
\renewcommand{\headrulewidth}{0pt}% 2pt header rule
}
}
%%%%%%%%%%PAGE STYLE FOR THE READER









%%%%%%%%%%PAGE STYLE FOR THE ONLINE
\fancypagestyle{style3}{
\fancyhf{}
\fancyhead[C]{%
\begin{tikzpicture}[overlay, remember picture]%
    \fill[yellow] (current page.north west) rectangle ($(current page.north east)+(0,-1in)$);
    \node[anchor=north west, text=white, font=\Large\scshape, minimum size=1in, inner xsep=5mm] at (current page.north west) {\hspace{1cm} \Huge Studying Online};
%    \node[anchor=north east, minimum size=1in, inner xsep=5mm] at (current page.north east) {\includegraphics[scale=.1]{example-image-a}};
      %node[minimum width=\x2-\x1, minimum height=2cm, draw, rectangle, fill=blue!20, anchor=north west, align=left, text width=\x2-\x1] at ($(current page.north west)$) {\Large\bfseries \quad #1};
\end{tikzpicture}
}
\fancyfoot[CE]{
    \begin{tikzpicture}[overlay, remember picture]%
    \fill[yellow] (current page.south west) rectangle ($(current page.south east)+(0,.5in)$);
    \node[anchor=south west, text=white, font=\Large, minimum size=.5in] at (current page.south west) {\thepage};
%    \node[anchor=south, text=white, font=\large, minimum size=.5in] at (current page.south) {\leftmark};
    \node[anchor=south east, text=white, font=\large, minimum size=.5in, inner xsep=5mm] at (current page.south east) {\today};
\end{tikzpicture}
}
\fancyfoot[CO]{
    \begin{tikzpicture}[overlay, remember picture]%
    \fill[yellow] (current page.south west) rectangle ($(current page.south east)+(0,.5in)$);
    \node[anchor=south west, text=white, font=\large, minimum size=.5in, inner xsep=5mm] at (current page.south west) {\today};
%    \node[anchor=south, text=white, font=\large, minimum size=.5in] at (current page.south) {\leftmark};
    \node[anchor=south east, text=white, font=\Large, minimum size=.5in] at (current page.south east) {\thepage};
\end{tikzpicture}
\renewcommand{\headrulewidth}{0pt}% 2pt header rule
}
}
%%%%%%%%%%PAGE STYLE FOR THE ONLINE



%%%%%%%%%%PAGE STYLE FOR THE CALEDAR
\fancypagestyle{style2}{
\fancyhf{}
\fancyhead[C]{%
\begin{tikzpicture}[overlay, remember picture]%
    \fill[gmitred] (current page.north west) rectangle ($(current page.north east)+(0,-1in)$);
    \node[anchor=north west, text=white, font=\Large\scshape, minimum size=1in, inner xsep=5mm] at (current page.north west) {\hspace{1cm} \Huge Academic Calendar};
%    \node[anchor=north east, minimum size=1in, inner xsep=5mm] at (current page.north east) {\includegraphics[scale=.1]{example-image-a}};
      %node[minimum width=\x2-\x1, minimum height=2cm, draw, rectangle, fill=blue!20, anchor=north west, align=left, text width=\x2-\x1] at ($(current page.north west)$) {\Large\bfseries \quad #1};
\end{tikzpicture}
}
\fancyfoot[CE]{
    \begin{tikzpicture}[overlay, remember picture]%
    \fill[gmitred] (current page.south west) rectangle ($(current page.south east)+(0,.5in)$);
    \node[anchor=south west, text=white, font=\Large, minimum size=.5in] at (current page.south west) {\thepage};
%    \node[anchor=south, text=white, font=\large, minimum size=.5in] at (current page.south) {\leftmark};
    \node[anchor=south east, text=white, font=\large, minimum size=.5in, inner xsep=5mm] at (current page.south east) {\today};
\end{tikzpicture}
}
\fancyfoot[CO]{
    \begin{tikzpicture}[overlay, remember picture]%
    \fill[gmitred] (current page.south west) rectangle ($(current page.south east)+(0,.5in)$);
    \node[anchor=south west, text=white, font=\large, minimum size=.5in, inner xsep=5mm] at (current page.south west) { };
%    \node[anchor=south, text=white, font=\large, minimum size=.5in] at (current page.south) {\leftmark};
    \node[anchor=south east, text=white, font=\Large, minimum size=.5in] at (current page.south east) {\thepage};
\end{tikzpicture}
\renewcommand{\headrulewidth}{0pt}% 2pt header rule
}
}
%%%%%%%%%%PAGE STYLE FOR THE CALENDAR


%%%%%%%%%%PAGE STYLE FOR  REVIEW
\fancypagestyle{style4}{
\fancyhf{}
\fancyhead[C]{%
\begin{tikzpicture}[overlay, remember picture]%
    \fill[purple!40!gray] (current page.south west) rectangle ($(current page.south east)+(0,.5in)$);
    \fill[purple!40!gray] ($(current page.north east)+(-0.5in, 0)$)  rectangle (current page.south east);
    \node[anchor=east, text=white, font=\Large\scshape, minimum size=1in, inner xsep=15mm, rotate=90] at ( $(current page.north east)+(-0.25in, 0)$) {\hspace{1cm} \Huge Review-Quizz};
%    \node[anchor=north east, minimum size=1in, inner xsep=5mm] at (current page.north east) {\includegraphics[scale=.1]{example-image-a}};
      %node[minimum width=\x2-\x1, minimum height=2cm, draw, rectangle, fill=blue!20, anchor=north west, align=left, text width=\x2-\x1] at ($(current page.north west)$) {\Large\bfseries \quad #1};
\end{tikzpicture}
}

}
%%%%%%%%%%PAGE STYLE FOR REVIEW

%%%%%%%%%%PAGE STYLE FOR  PARTS
\fancypagestyle{style6}{
\fancyhf{}
\fancyhead[C]{%
\begin{tikzpicture}[overlay, remember picture]%
    \fill[purple!40!gray] (current page.south west) rectangle ($(current page.north east)+(0,.5in)$);
    \node[anchor=east, text=white, font=\Large\scshape, minimum size=1in, inner xsep=15mm, rotate=90] at ( $(current page.north east)+(-0.25in, 0)$) {\hspace{1cm} };
%    \node[anchor=north east, minimum size=1in, inner xsep=5mm] at (current page.north east) {\includegraphics[scale=.1]{example-image-a}};
      %node[minimum width=\x2-\x1, minimum height=2cm, draw, rectangle, fill=blue!20, anchor=north west, align=left, text width=\x2-\x1] at ($(current page.north west)$) {\Large\bfseries \quad #1};
\end{tikzpicture}
}

}
%%%%%%%%%%PAGE STYLE FOR  PARTS


%%%%%%%%%%PAGE STYLE FOR  REVIEW ENTRY PAGE
\fancypagestyle{style5}{
\fancyhf{}
\fancyhead[C]{%
\begin{tikzpicture}[overlay, remember picture]%
    \fill[cyan] (current page.south west) rectangle ($(current page.north east)+(0,.5in)$);
    \node[anchor=east, text=white, font=\Large\scshape, minimum size=1in, inner xsep=15mm, rotate=90] at ( $(current page.north east)+(-0.25in, 0)$) {\hspace{1cm} };
%    \node[anchor=north east, minimum size=1in, inner xsep=5mm] at (current page.north east) {\includegraphics[scale=.1]{example-image-a}};
      %node[minimum width=\x2-\x1, minimum height=2cm, draw, rectangle, fill=blue!20, anchor=north west, align=left, text width=\x2-\x1] at ($(current page.north west)$) {\Large\bfseries \quad #1};
\end{tikzpicture}
}

}
%%%%%%%%%%PAGE STYLE FOR  REVIEW ENTRY PAGE





\usepackage{enumitem,graphicx}% http://ctan.org/pkg/{enumitem,graphicx}
\definecolor{Red}{cmyk}{0,1,1,0}
\def\red{\color{Red}}
\definecolor{Blue}{cmyk}{1,1,0,0}
\def\blue{\color{Blue}}
\Huge
\usetikzlibrary{arrows,shapes}
\usetikzlibrary{positioning,calendar,er}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{shapes.geometric}
\usepackage{xifthen}

%\newcommand{\holidays}{\foreach \x in {01-06,04-04}
%{ \ifthenelse{equals = \i}{\node [draw,cloud] {};} {}   }
%}



\newcommand{\calrow}[1]{\node[anchor=base,xshift=0.5ex](seg){\textcolor{red}{M}}; % Shift first weekday
\node[base right=of seg, xshift=0.05cm](ter){\textcolor{red}{T}}; \node[base right=of ter, xshift=0.1cm](qua){\textcolor{red}{W}};
\node[base right=of qua, xshift=0.2cm](qui){\textcolor{red}{T}}; \node[base right=of qui, xshift=0.2cm](sex){\textcolor{red}{F}};
\node[base right=of sex, xshift=0.1cm](sab){\textcolor{red}{S}}; \node[base right=of sab, xshift=0.15cm](dom){\textcolor{red}{S}};
\node[black,above=of qui]{\textbf{#1}};}
\newcommand{\calperiod}[1]{\calendar[dates=\the\year-#1-01 to \the\year-#1-last,
  every day/.style={anchor=base}, % Center days
  day text={\%d=},rounded corners=0,anchor=base,text height=1ex,text depth=-0.5ex] % Make node placement easier
if(Sunday) [black] \holidays;}
\newcommand{\holidays}{
%if (equals=01-06) [black!50]%
if (equals=06-02,
      equals=06-09,
      equals=06-16,
      equals=06-23,
      equals=06-30,
      equals=07-07,
      equals=07-14,
      ) {\node [fill=blue!50,draw,diamond,  opacity=1] {};}
      if (equals=05-30,
      equals=06-06,
      equals=06-11,
      equals=06-13,
      equals=06-20,
      equals=06-25,
      equals=06-27,
      equals=07-11,
      ) {\node [fill=yellow,draw,star, opacity=1] {};}
      if (equals=06-04,
      equals=06-18,
            equals=07-02,
      equals=07-16,
      ) {\node [fill=red,draw,cloud,  opacity=1] {};}
      if (equals=07-16){\node [fill=green,draw,cloud,  opacity=1] {};}
      }

\colorlet{darkgreen}{green!50!black}


\newboolean{firstanswerofthechapter}  

\usepackage{xcolor}
\colorlet{lightcyan}{cyan!40!white}

\usepackage{chngcntr}
\usepackage{stackengine}

\usepackage{tasks}
\newlength{\longestlabel}
\settowidth{\longestlabel}{\bfseries viii.}
\settasks{counter-format={tsk[r].}, label-format={\bfseries}, label-width=\longestlabel,
    item-indent=0pt, label-offset=2pt, column-sep={10pt}}

\usepackage[lastexercise,answerdelayed]{exercise}
\counterwithin{Answer}{chapter}
\renewcounter{Exercise}[chapter]
\newcommand{\QuestionNB}{\bfseries\arabic{Question}.\ }
\renewcommand{\ExerciseName}{EXERCISES}
\renewcommand{\AnswerName}{Answers:}
\renewcommand{\AnswerHeader}{\ifthenelse{\boolean{firstanswerofthechapter}}{\bfseries\textcolor{black}{\AnswerName\ \ExerciseHeaderNB}}{\bfseries\textcolor{black}{\AnswerName\ \ExerciseHeaderNB}}}
\setlength{\QuestionIndent}{0pt}


\usepackage{tasks}
\AtBeginEnvironment{tasks}{\setstretch{.4}}

%%%%%%%%%FRUITS
\usepackage{xcolor-material}
\usetikzlibrary{fit}
\tikzset{%
   apple/.pic={
\fill [MaterialBrown] (-1/8,0) 
  arc (180:120:1 and 3/2) coordinate [pos=3/5] (@)-- ++(1/6,-1/7) 
  arc (120:180:5/4 and 3/2) -- cycle;
\fill [MaterialLightGreen500] (0,-9/10) 
  .. controls ++(180:1/8) and ++(  0:1/4) .. (-1/3,  -1)
  .. controls ++(180:1/3) and ++(270:1/2) .. (  -1,   0)
  .. controls ++( 90:1/3) and ++(180:1/3) .. (-1/2, 3/4)
  .. controls ++(  0:1/8) and ++(135:1/8) .. (   0, 4/7)
  .. controls ++( 45:1/8) and ++(180:1/8) .. ( 1/2, 3/4)
  .. controls ++(  0:1/3) and ++( 90:1/3) .. (   1,   0)
  .. controls ++(270:1/2) and ++(  0:1/3) .. ( 1/3,  -1)
  .. controls ++(180:1/4) and ++(  0:1/8) .. cycle;
\fill [MaterialLightGreen600] (0, 4/7)
  .. controls ++( 45:1/8) and ++(180:1/8) .. ( 1/2, 3/4)
  .. controls ++(  0:1/3) and ++( 90:1/3) .. (   1,   0)
  .. controls ++(270:1/2) and ++(  0:1/3) .. ( 1/3,  -1)
  .. controls ++(180:1/4) and ++(  0:1/8) .. (   0,-9/10);
\fill [MaterialGreen500, shift={(@)}, rotate=-30] 
  (0,0) arc (45:135:3/4 and 3/5) arc (225:315:3/4 and 3/5);
\fill [MaterialGreen700, shift={(@)}, rotate=-30] 
  (0,0) arc (315:225:3/4 and 3/5) -- cycle;
},
  orange/.pic={
\fill [MaterialOrange500] (0,0) circle [radius=1];
\fill [MaterialOrange600] (0,0) -- (45:1) arc (45:-135:1) -- cycle;
\fill [MaterialOrange700, shift={(0,3/4)}] coordinate (@)
ellipse [x radius=1/4, y radius=1/8];
\begin{scope}
\clip (0,0) circle [radius=1];
\fill [MaterialOrange700, shift=(@)] (90:1/4 and 1/8) 
  \foreach \i [evaluate={\j=mod(\i,2)+1/4;}]in {0,...,12}{
  -- (90+\i*30:\j*3/4 and \j*3/8) } -- cycle;
\end{scope}
\fill [MaterialBrown] (-1/16, 3/4) -- ++(0,1/4) arc (180:0:1/16 and 1/32)
   -- ++(0,-1/4) arc (360:180:1/16 and 1/32) -- cycle;
\fill [MaterialGreen500, shift=(@), rotate=-150] 
  (0,0) arc (45:135:1/2 and 4/5) arc (225:315:1/2 and 3/5);
\fill [MaterialGreen700, shift=(@), rotate=-150] 
  (0,0) arc (45:135:1/2 and 4/5) -- cycle;
},
lemon/.pic={
\tikzset{rotate=-45}
\fill [MaterialYellow500] (0, 0) ellipse [x radius=1/3, y radius=  1];
\fill [MaterialYellow500] (0, 0) ellipse [x radius=3/4, y radius=7/8];
\fill [MaterialYellow600] (270:1/3 and   1) arc (270:450:1/3 and   1);
\fill [MaterialYellow600] (270:3/4 and 7/8) arc (270:450:3/4 and 7/8);
\begin{scope}[shift=(90:9/10), rotate=-135]
\fill [MaterialGreen500] 
  (0,0) arc (45:135:1/2 and 4/5) arc (225:315:1/2 and 3/5);
\fill [MaterialGreen700] 
  (0,0) arc (45:135:1/2 and 4/5) -- cycle;
\tikzset{rotate=90, scale=3/4}
\fill [MaterialGreen500] 
  (0,0) arc (45:135:1/2 and 4/5) arc (225:315:1/2 and 3/5);
\fill [MaterialGreen700] 
  (0,0) arc (45:135:1/2 and 4/5) -- cycle;
\end{scope}
},
cherry/.pic={
\foreach \i in {1,2}{
\tikzset{shift={(-1+\i*3/4, -3/5+\i/5)},scale=1/2, rotate=15-\i*10}
\fill [MaterialRed700] (0,19/20) 
  .. controls ++(180:1/8) and ++(  0:1/4) .. (-1/3,  1)
  .. controls ++(180:1/3) and ++( 90:1/2) .. (  -1,  0)
  .. controls ++(270:1/2) and ++(180:1/2) .. (   0, -1)
  .. controls ++(  0:1/2) and ++(270:1/2) .. (   1,  0)
  .. controls ++( 90:1/2) and ++(  0:1/3) .. ( 1/3,  1)
  .. controls ++(180:1/4) and ++(  0:1/8) .. cycle;
\fill [MaterialRed800] (0, -1)
  .. controls ++(  0:1/2) and ++(270:1/2) .. (   1,  0)
  .. controls ++( 90:1/2) and ++(  0:1/3) .. ( 1/3,  1)
  .. controls ++(180:1/4) and ++(  0:1/8) .. (   0,19/20) -- cycle;
\fill [MaterialRed900] (0,3/4) coordinate (@\i) 
  ellipse [x radius=1/4, y radius=1/8];
}
\fill [MaterialBrown]
  (1/4,11/8) -- (3/8,11/8) coordinate (@)
  .. controls ++(270:1/2) and ++(135:1/3) .. (@1)
  .. controls ++(135:1/2) and ++(270:1/2) .. cycle;
\fill [MaterialBrown]
  (1/4,11/8) -- (3/8,11/8)
  .. controls ++(315:1/2) and ++(45:1/2) .. (@2)
  .. controls ++(60:1/2) and ++(315:1/2) .. cycle;
\fill [MaterialGreen500, shift={(@)}, rotate=20] 
  (0,0) arc (45:135:3/4 and 3/5) arc (225:315:3/4 and 3/5);
\fill [MaterialGreen700, shift={(@)}, rotate=20] 
  (0,0) arc (315:225:3/4 and 3/5) -- cycle;
}}
%%%%%%%%%FRUITS


\begin{document} 
\subfile{./cover/title.tex}
\subfile{./periodictable/periodictable.tex}
\clearpage\thispagestyle{empty}\mbox{}\clearpage
\tableofcontents
\clearpage\thispagestyle{empty}\mbox{}
\subfile{./tothereader/tothereader.tex}
\clearpage\thispagestyle{empty}\mbox{}
%\subfile{./online/online.tex}
%\subfile{./calendar/calendar.tex}

\subfile{./parts/a.tex} \clearpage\thispagestyle{empty}\mbox{}\clearpage
\subfile{./chapter1/chapter1.tex}
\subfile{./chapter1/chapter1Problems.tex}
%\subfile{./review/1.tex}
\subfile{./chapter0.5/chapter0.5.tex}
\subfile{./chapter0.5/chapter0.5Problems.tex}
\subfile{./parts/ra.tex} \clearpage\thispagestyle{empty}\mbox{}\clearpage
\subfile{./review/1-2.tex}

\subfile{./parts/b.tex}\clearpage\thispagestyle{empty}\mbox{}
\subfile{./chapter5/chapter5.tex}
\subfile{./chapter5/chapter5Problems.tex}
\subfile{./chapter7/chapter7.tex}\clearpage\thispagestyle{empty}\mbox{}\clearpage
\subfile{./chapter7/chapter7Problems.tex}\clearpage\thispagestyle{empty}\mbox{}\clearpage
\subfile{./parts/rb.tex} \clearpage\thispagestyle{empty}\mbox{}\clearpage
\subfile{./review/3-4.tex}

\subfile{./parts/c.tex}\clearpage\thispagestyle{empty}\mbox{}
\subfile{./chapter9/chapter9.tex}
\subfile{./chapter9/chapter9Problems.tex}
\subfile{./chapter8/chapter8.tex}
\subfile{./chapter8/chapter8Problems.tex}\clearpage\thispagestyle{empty}\mbox{}
\subfile{./parts/rc.tex} \clearpage\thispagestyle{empty}\mbox{}\clearpage
\subfile{./review/5-6.tex}

\subfile{./parts/d.tex}\clearpage\thispagestyle{empty}\mbox{}
\subfile{./chapter2/chapter2.tex}
\subfile{./chapter2/chapter2Problems.tex}
\subfile{./chapter3/chapter3.tex}
\subfile{./chapter3/chapter3Problems.tex}
\subfile{./parts/rd.tex} \clearpage\thispagestyle{empty}\mbox{}\clearpage
\subfile{./review/7-8.tex}

\subfile{./parts/e.tex}\clearpage\thispagestyle{empty}\mbox{}
\subfile{./chapter6/chapter6.tex}
\subfile{./chapter6/chapter6Problems.tex}
\subfile{./chapter14/chapter14.tex}\clearpage\thispagestyle{empty}\mbox{}\clearpage
\subfile{./chapter14/Problems.tex}
\subfile{./parts/re.tex} \clearpage\thispagestyle{empty}\mbox{}\clearpage
\subfile{./review/9-10.tex}
%\subfile{./review/1-10.tex}

\subfile{./cover/back.tex}




\end{document} 





